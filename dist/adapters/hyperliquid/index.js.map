{"version":3,"sources":["../../../src/store/index.ts","../../../src/adapters/hyperliquid/base.ts","../../../src/adapters/hyperliquid/info.ts","../../../src/adapters/hyperliquid/exchange.ts","../../../src/adapters/hyperliquid/env.ts","../../../src/adapters/hyperliquid/symbols.ts","../../../src/adapters/hyperliquid/order-utils.ts","../../../src/adapters/hyperliquid/state-readers.ts","../../../src/adapters/hyperliquid/market-data.ts","../../../src/adapters/hyperliquid/index.ts"],"names":["universe","encodeMsgpack","UNKNOWN_SYMBOL","normalizeSpotTokenName","base","maxDecimals","meta"],"mappings":"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","file":"index.js","sourcesContent":["type StoreStatus =\n  | \"submitted\"\n  | \"pending\"\n  | \"confirmed\"\n  | \"failed\"\n  | \"cancelled\"\n  | \"filled\"\n  | \"partial_fill\"\n  | \"settled\"\n  | \"info\";\n\nconst STORE_EVENT_LEVELS = [\n  \"decision\",\n  \"execution\",\n  \"lifecycle\",\n] as const;\n\nconst STORE_EVENT_LEVEL_SET = new Set<string>(STORE_EVENT_LEVELS);\n\nconst CANONICAL_STORE_ACTIONS = [\n  \"stake\",\n  \"unstake\",\n  \"swap\",\n  \"bridge\",\n  \"order\",\n  \"trade\",\n  \"lend\",\n  \"borrow\",\n  \"repay\",\n  \"withdraw\",\n  \"provide_liquidity\",\n  \"remove_liquidity\",\n  \"claim\",\n  \"custom\",\n] as const;\n\nconst MARKET_REQUIRED_ACTIONS = [\n  \"swap\",\n  \"bridge\",\n  \"order\",\n  \"trade\",\n  \"lend\",\n  \"borrow\",\n  \"repay\",\n  \"stake\",\n  \"unstake\",\n  \"withdraw\",\n  \"provide_liquidity\",\n  \"remove_liquidity\",\n  \"claim\",\n] as const;\n\nconst MARKET_REQUIRED_ACTIONS_SET = new Set<string>(MARKET_REQUIRED_ACTIONS);\nconst EXECUTION_ACTIONS_SET = new Set<string>(MARKET_REQUIRED_ACTIONS);\n\nexport type StoreAction =\n  | (typeof CANONICAL_STORE_ACTIONS)[number]\n  | string;\n\nexport type StoreEventLevel = (typeof STORE_EVENT_LEVELS)[number];\n\ntype ChainScope =\n  | { chainId: number; network?: never }\n  | { network: string; chainId?: never }\n  | { chainId?: never; network?: never };\n\nexport type StoreEventInput = ChainScope & {\n  source: string;\n  ref: string;\n  status: StoreStatus;\n  walletAddress?: `0x${string}`;\n  action?: StoreAction;\n  eventLevel?: StoreEventLevel;\n  notional?: string; // decimal string recommended to avoid float precision issues\n  metadata?: Record<string, unknown>;\n  market?: Record<string, unknown>;\n};\n\nexport interface StoreOptions {\n  baseUrl?: string;\n  apiKey?: string;\n  fetchFn?: typeof fetch;\n}\n\nexport interface StoreResponse {\n  id: string;\n  status?: StoreStatus | null;\n}\n\nexport type StoreRetrieveParams = {\n  source?: string;\n  walletAddress?: `0x${string}`;\n  symbol?: string;\n  status?: StoreStatus[];\n  since?: number;\n  until?: number;\n  limit?: number;\n  cursor?: string;\n  history?: boolean;\n};\n\nexport type StoreRetrieveResult = {\n  items: Array<\n    StoreEventInput & {\n      timestamp?: number;\n      updatedBy?: string | null;\n      signerKeyId?: string | null;\n    }\n  >;\n  cursor?: string | null;\n};\n\nexport type MyToolsResponse = {\n  tools: Array<{\n    id: string;\n    name: string;\n    displayName: string;\n    description?: string;\n    serverUrl: string;\n    source: \"internal\" | \"public\";\n    appId?: string;\n    deploymentId?: string;\n    metadata?: unknown;\n  }>;\n};\n\nexport type ToolExecuteRequest = {\n  appId: string;\n  deploymentId: string;\n  toolName: string;\n  method?: \"GET\" | \"POST\" | \"PUT\" | \"DELETE\";\n  body?: unknown;\n};\n\nexport type ToolExecuteResponse = {\n  ok: boolean;\n  status: number;\n  data: unknown;\n};\n\nexport type AgentDigestRequest = {\n  content: string;\n  runAt?: string;\n  metadata?: Record<string, unknown>;\n};\nexport class StoreError extends Error {\n  constructor(\n    message: string,\n    public readonly status?: number,\n    public readonly causeData?: unknown\n  ) {\n    super(message);\n    this.name = \"StoreError\";\n  }\n}\n\nconst normalizeAction = (\n  action: string | null | undefined\n): string | null => {\n  const normalized = action?.trim().toLowerCase();\n  return normalized ? normalized : null;\n};\n\nconst coerceEventLevel = (value: unknown): StoreEventLevel | null => {\n  if (typeof value !== \"string\") return null;\n  const normalized = value.trim().toLowerCase();\n  if (!normalized || !STORE_EVENT_LEVEL_SET.has(normalized)) return null;\n  return normalized as StoreEventLevel;\n};\n\nconst requiresMarketIdentity = (input: StoreEventInput): boolean => {\n  const action = normalizeAction(input.action);\n  if (!action) return false;\n  return MARKET_REQUIRED_ACTIONS_SET.has(action);\n};\n\nconst hasMarketIdentity = (value: unknown): value is Record<string, unknown> => {\n  if (!value || typeof value !== \"object\" || Array.isArray(value)) return false;\n  const record = value as Record<string, unknown>;\n  const requiredKeys = [\"market_type\", \"venue\", \"environment\", \"canonical_symbol\"] as const;\n  return requiredKeys.every((key) => {\n    const field = record[key];\n    return typeof field === \"string\" && field.trim().length > 0;\n  });\n};\n\nconst resolveEventLevel = (input: StoreEventInput): StoreEventLevel | null => {\n  const direct = coerceEventLevel(input.eventLevel);\n  if (direct) return direct;\n\n  const metadataLevel = coerceEventLevel(input.metadata?.eventLevel);\n  if (metadataLevel) return metadataLevel;\n\n  const action = normalizeAction(input.action);\n  if (\n    action &&\n    EXECUTION_ACTIONS_SET.has(action) &&\n    (input.metadata?.lifecycle === true ||\n      typeof input.metadata?.executionRef === \"string\" ||\n      typeof input.metadata?.parentExecutionRef === \"string\")\n  ) {\n    return \"lifecycle\";\n  }\n  if ((action && EXECUTION_ACTIONS_SET.has(action)) || hasMarketIdentity(input.market)) {\n    return \"execution\";\n  }\n  if (action) return \"decision\";\n\n  return null;\n};\n\nconst normalizeStoreInput = (input: StoreEventInput): StoreEventInput => {\n  const metadata = { ...(input.metadata ?? {}) };\n  const eventLevel = resolveEventLevel({ ...input, metadata });\n  if (eventLevel) {\n    metadata.eventLevel = eventLevel;\n  }\n  const hasMetadata = Object.keys(metadata).length > 0;\n  return {\n    ...input,\n    ...(eventLevel ? { eventLevel } : {}),\n    ...(hasMetadata ? { metadata } : {}),\n  };\n};\n\nfunction resolveConfig(options?: StoreOptions) {\n  const baseUrl = options?.baseUrl ?? process.env.BASE_URL ?? \"https://api.openpond.ai\";\n  const apiKey = options?.apiKey ?? process.env.OPENPOND_API_KEY;\n\n  if (!baseUrl) {\n    throw new StoreError(\"BASE_URL is required to store activity events\");\n  }\n  if (!apiKey) {\n    throw new StoreError(\n      \"OPENPOND_API_KEY is required to store activity events\"\n    );\n  }\n\n  const normalizedBaseUrl = baseUrl.replace(/\\/$/, \"\");\n  const fetchFn = options?.fetchFn ?? globalThis.fetch;\n  if (!fetchFn) {\n    throw new StoreError(\"Fetch is not available in this environment\");\n  }\n\n  return { baseUrl: normalizedBaseUrl, apiKey, fetchFn };\n}\n\nasync function requestJson(\n  url: string,\n  options: StoreOptions | undefined,\n  init: RequestInit\n): Promise<unknown> {\n  const { apiKey, fetchFn } = resolveConfig(options);\n  const response = await fetchFn(url, {\n    ...init,\n    headers: {\n      \"content-type\": \"application/json\",\n      \"openpond-api-key\": apiKey,\n      ...(init.headers ?? {}),\n    },\n  });\n\n  if (!response.ok) {\n    let body: unknown;\n    try {\n      body = await response.json();\n    } catch {\n      body = await response.text().catch(() => undefined);\n    }\n    throw new StoreError(\n      `Request failed with status ${response.status}`,\n      response.status,\n      body\n    );\n  }\n\n  if (response.status === 204) {\n    return null;\n  }\n\n  try {\n    return await response.json();\n  } catch {\n    return await response.text().catch(() => null);\n  }\n}\n\n/**\n * Store a generic activity event (onchain tx, Hyperliquid order, etc.) in OpenPond.\n */\nexport async function store(\n  input: StoreEventInput,\n  options?: StoreOptions\n): Promise<StoreResponse> {\n  const normalizedInput = normalizeStoreInput(input);\n  const eventLevel = normalizedInput.eventLevel;\n  const normalizedAction = normalizeAction(normalizedInput.action);\n\n  if (eventLevel === \"execution\" || eventLevel === \"lifecycle\") {\n    if (!normalizedAction || !EXECUTION_ACTIONS_SET.has(normalizedAction)) {\n      throw new StoreError(\n        `eventLevel \"${eventLevel}\" requires an execution action`\n      );\n    }\n  }\n  if (eventLevel === \"execution\" && !hasMarketIdentity(normalizedInput.market)) {\n    throw new StoreError(\n      `market is required for execution events. market must include market_type, venue, environment, canonical_symbol`\n    );\n  }\n  const shouldApplyLegacyMarketRule =\n    eventLevel == null || eventLevel === \"execution\";\n  if (\n    shouldApplyLegacyMarketRule &&\n    requiresMarketIdentity(normalizedInput) &&\n    !hasMarketIdentity(normalizedInput.market)\n  ) {\n    throw new StoreError(\n      `market is required for action \"${normalizedInput.action}\". market must include market_type, venue, environment, canonical_symbol`\n    );\n  }\n  const { baseUrl, apiKey, fetchFn } = resolveConfig(options);\n\n  const url = `${baseUrl}/apps/positions/tx`;\n\n  let response: Response;\n  try {\n    response = await fetchFn(url, {\n      method: \"POST\",\n      headers: {\n        \"content-type\": \"application/json\",\n        \"openpond-api-key\": apiKey,\n      },\n      body: JSON.stringify(normalizedInput),\n    });\n  } catch (error) {\n    throw new StoreError(\"Failed to reach store endpoint\", undefined, error);\n  }\n\n  if (!response.ok) {\n    let body: unknown;\n    try {\n      body = await response.json();\n    } catch {\n      body = await response.text().catch(() => undefined);\n    }\n    throw new StoreError(\n      `Store request failed with status ${response.status}`,\n      response.status,\n      body\n    );\n  }\n\n  try {\n    const data = (await response.json()) as Partial<StoreResponse>;\n    return {\n      id: data.id ?? \"\",\n      status: data.status ?? null,\n    };\n  } catch {\n    // Response is optional; return empty success\n    return { id: \"\", status: null };\n  }\n}\n\n/**\n * Retrieve stored activity events for an app.\n */\nexport async function retrieve(\n  params?: StoreRetrieveParams,\n  options?: StoreOptions\n): Promise<StoreRetrieveResult> {\n  const { baseUrl, apiKey, fetchFn } = resolveConfig(options);\n\n  const url = new URL(`${baseUrl}/apps/positions/tx`);\n  if (params?.source) url.searchParams.set(\"source\", params.source);\n  if (params?.walletAddress) url.searchParams.set(\"walletAddress\", params.walletAddress);\n  if (params?.symbol) url.searchParams.set(\"symbol\", params.symbol);\n  if (params?.status?.length) url.searchParams.set(\"status\", params.status.join(\",\"));\n  if (typeof params?.since === \"number\") url.searchParams.set(\"since\", params.since.toString());\n  if (typeof params?.until === \"number\") url.searchParams.set(\"until\", params.until.toString());\n  if (typeof params?.limit === \"number\") url.searchParams.set(\"limit\", params.limit.toString());\n  if (params?.cursor) url.searchParams.set(\"cursor\", params.cursor);\n  if (params?.history) url.searchParams.set(\"history\", \"true\");\n\n  let response: Response;\n  try {\n    response = await fetchFn(url.toString(), {\n      method: \"GET\",\n      headers: {\n        \"content-type\": \"application/json\",\n        \"openpond-api-key\": apiKey,\n      },\n    });\n  } catch (error) {\n    throw new StoreError(\"Failed to reach store endpoint\", undefined, error);\n  }\n\n  if (!response.ok) {\n    let body: unknown;\n    try {\n      body = await response.json();\n    } catch {\n      body = await response.text().catch(() => undefined);\n    }\n    throw new StoreError(\n      `Store retrieve failed with status ${response.status}`,\n      response.status,\n      body\n    );\n  }\n\n  const data = (await response.json().catch(() => null)) as StoreRetrieveResult | null;\n  if (!data) {\n    return { items: [], cursor: null };\n  }\n  return data;\n}\n\nexport async function getMyTools(options?: StoreOptions): Promise<MyToolsResponse> {\n  const { baseUrl } = resolveConfig(options);\n  const url = `${baseUrl}/apps/tools`;\n  const data = (await requestJson(url, options, { method: \"GET\" })) as MyToolsResponse;\n  return data;\n}\n\nexport async function getMyPerformance(options?: StoreOptions): Promise<unknown> {\n  const { baseUrl } = resolveConfig(options);\n  const url = `${baseUrl}/apps/performance`;\n  return requestJson(url, options, { method: \"GET\" });\n}\n\nexport async function postAgentDigest(\n  input: AgentDigestRequest,\n  options?: StoreOptions\n): Promise<unknown> {\n  const { baseUrl } = resolveConfig(options);\n  const url = `${baseUrl}/apps/agent/digest`;\n  return requestJson(url, options, {\n    method: \"POST\",\n    body: JSON.stringify(input),\n  });\n}\n\nexport async function executeTool(\n  input: ToolExecuteRequest,\n  options?: StoreOptions\n): Promise<ToolExecuteResponse> {\n  const { baseUrl } = resolveConfig(options);\n  const url = `${baseUrl}/apps/tools/execute`;\n  const data = (await requestJson(url, options, {\n    method: \"POST\",\n    body: JSON.stringify(input),\n  })) as ToolExecuteResponse;\n  return data;\n}\n","import { encode as encodeMsgpack } from \"@msgpack/msgpack\";\nimport { keccak_256 } from \"@noble/hashes/sha3\";\nimport { bytesToHex, concatBytes, hexToBytes } from \"@noble/hashes/utils\";\nimport type { WalletFullContext } from \"../../wallet/types\";\n\nconst CACHE_TTL_MS = 5 * 60 * 1000;\n\nexport const API_BASES = {\n  mainnet: \"https://api.hyperliquid.xyz\",\n  testnet: \"https://api.hyperliquid-testnet.xyz\",\n} as const satisfies Record<HyperliquidEnvironment, string>;\n\nexport const HL_ENDPOINT = {\n  mainnet: \"https://api.hyperliquid.xyz\",\n  testnet: \"https://api.hyperliquid-testnet.xyz\",\n} as const satisfies Record<HyperliquidEnvironment, string>;\n\nexport const HL_CHAIN_LABEL = {\n  mainnet: \"Mainnet\",\n  testnet: \"Testnet\",\n} as const satisfies Record<HyperliquidEnvironment, string>;\n\nexport const HL_BRIDGE_ADDRESSES: Record<\n  HyperliquidEnvironment,\n  `0x${string}`\n> = {\n  mainnet: \"0x2df1c51e09aecf9cacb7bc98cb1742757f163df7\",\n  testnet: \"0x08cfc1b6b2dcf36a1480b99353a354aa8ac56f89\",\n};\n\nexport const HL_USDC_ADDRESSES: Record<HyperliquidEnvironment, `0x${string}`> =\n  {\n    mainnet: \"0xaf88d065e77c8cc2239327c5edb3a432268e5831\",\n    testnet: \"0x1baAbB04529D43a73232B713C0FE471f7c7334d5\",\n  };\n\nexport const HL_SIGNATURE_CHAIN_ID = {\n  mainnet: \"0xa4b1\",\n  testnet: \"0x66eee\",\n} as const satisfies Record<HyperliquidEnvironment, string>;\n\nexport const EXCHANGE_TYPED_DATA_DOMAIN = {\n  name: \"Exchange\",\n  version: \"1\",\n  chainId: 1337,\n  verifyingContract: \"0x0000000000000000000000000000000000000000\" as const,\n};\n\nexport const ZERO_ADDRESS =\n  \"0x0000000000000000000000000000000000000000\" as const;\nexport const MIN_DEPOSIT_USDC = 5;\nexport const BUILDER_CODE: HyperliquidBuilderFee = {\n  address: \"0x4b2aec4F91612849d6e20C9c1881FabB1A48cd12\",\n  fee: 100,\n};\n\nconst metaCache = new Map<\n  string,\n  { fetchedAt: number; universe: MetaResponse[\"universe\"] }\n>();\nconst spotMetaCache = new Map<\n  string,\n  { fetchedAt: number; universe: SpotUniverseItem[]; tokens: SpotToken[] }\n>();\nconst perpDexsCache = new Map<\n  string,\n  { fetchedAt: number; dexs: PerpDexsResponse }\n>();\n\nexport type HyperliquidEnvironment = \"mainnet\" | \"testnet\";\n\nexport type MarketIdentity = {\n  market_type: \"perp\" | \"spot\" | \"dex\";\n  venue: \"hyperliquid\";\n  environment: HyperliquidEnvironment;\n  base: string;\n  quote?: string | null;\n  dex?: string | null;\n  chain_id?: number | null;\n  pool_address?: string | null;\n  token0_address?: string | null;\n  token1_address?: string | null;\n  fee_tier?: number | null;\n  raw_symbol?: string | null;\n  canonical_symbol: string;\n};\n\nexport type HyperliquidMarketIdentityInput = {\n  environment: HyperliquidEnvironment;\n  symbol: string;\n  rawSymbol?: string | null;\n  isSpot?: boolean;\n  base?: string | null;\n  quote?: string | null;\n};\n\nconst UNKNOWN_SYMBOL = \"UNKNOWN\";\n\nconst extractDexPrefix = (value?: string | null): string | null => {\n  if (!value) return null;\n  const trimmed = value.trim();\n  if (!trimmed) return null;\n  if (!trimmed.includes(\":\")) return null;\n  if (trimmed.startsWith(\"@\")) return null;\n  const [prefix] = trimmed.split(\":\");\n  const dex = prefix?.trim().toLowerCase() ?? \"\";\n  return dex || null;\n};\n\nconst normalizeHyperliquidBase = (value?: string | null): string | null => {\n  if (!value) return null;\n  const trimmed = value.trim();\n  if (!trimmed) return null;\n  const withoutDex = trimmed.includes(\":\")\n    ? trimmed.split(\":\").slice(1).join(\":\")\n    : trimmed;\n  const base = withoutDex.split(\"-\")[0] ?? withoutDex;\n  const normalized = (base.split(\"/\")[0] ?? base).trim().toUpperCase();\n  if (!normalized || normalized === UNKNOWN_SYMBOL) return null;\n  return normalized;\n};\n\nconst normalizeSpotTokenName = (value?: string | null): string => {\n  const raw = (value ?? \"\").trim().toUpperCase();\n  if (!raw) return \"\";\n  if (raw.endsWith(\"0\") && raw.length > 1) {\n    return raw.slice(0, -1);\n  }\n  return raw;\n};\n\nconst parseHyperliquidPair = (\n  value?: string | null\n): { base: string; quote: string } | null => {\n  if (!value) return null;\n  const trimmed = value.trim();\n  if (!trimmed) return null;\n  const withoutDex = trimmed.includes(\":\")\n    ? trimmed.split(\":\").slice(1).join(\":\")\n    : trimmed;\n  const separator = withoutDex.includes(\"/\")\n    ? \"/\"\n    : withoutDex.includes(\"-\")\n      ? \"-\"\n      : null;\n  if (!separator) return null;\n  const [baseRaw, ...rest] = withoutDex.split(separator);\n  const quoteRaw = rest.join(separator);\n  if (!baseRaw || !quoteRaw) return null;\n  const base = baseRaw.trim().toUpperCase();\n  const quote = quoteRaw.trim().toUpperCase();\n  if (!base || !quote) return null;\n  return { base, quote };\n};\n\nexport function buildHyperliquidMarketIdentity(\n  input: HyperliquidMarketIdentityInput\n): MarketIdentity | null {\n  const rawSymbol = input.rawSymbol ?? input.symbol;\n  const dex = extractDexPrefix(rawSymbol);\n  const pair = parseHyperliquidPair(rawSymbol) ?? parseHyperliquidPair(input.symbol);\n  const isSpot =\n    input.isSpot ??\n    (Boolean(pair) || rawSymbol.startsWith(\"@\") || input.symbol.includes(\"/\"));\n\n  const base =\n    (input.base ? input.base.trim().toUpperCase() : null) ??\n    pair?.base ??\n    normalizeHyperliquidBase(input.symbol) ??\n    normalizeHyperliquidBase(rawSymbol);\n\n  if (!base) return null;\n\n  if (isSpot) {\n    const quote =\n      (input.quote ? input.quote.trim().toUpperCase() : null) ?? pair?.quote ?? null;\n    if (!quote) return null;\n    return {\n      market_type: \"spot\",\n      venue: \"hyperliquid\",\n      environment: input.environment,\n      base,\n      quote,\n      dex,\n      raw_symbol: rawSymbol ?? null,\n      canonical_symbol: `spot:hyperliquid:${base}-${quote}`,\n    };\n  }\n\n  return {\n    market_type: \"perp\",\n    venue: \"hyperliquid\",\n    environment: input.environment,\n    base,\n    dex,\n    raw_symbol: rawSymbol ?? null,\n    canonical_symbol: `perp:hyperliquid:${base}`,\n  };\n}\nexport type HyperliquidTimeInForce =\n  | \"Gtc\"\n  | \"Ioc\"\n  | \"Alo\"\n  | \"FrontendMarket\"\n  | \"LiquidationMarket\";\nexport type HyperliquidGrouping = \"na\" | \"normalTpsl\" | \"positionTpsl\";\nexport type HyperliquidTriggerType = \"tp\" | \"sl\";\n\n// Hyperliquid account abstraction modes (API naming).\nexport type HyperliquidAbstraction =\n  | \"unifiedAccount\"\n  | \"portfolioMargin\"\n  | \"disabled\";\n\n// Product-facing naming.\nexport type HyperliquidAccountMode = \"standard\" | \"unified\" | \"portfolio\";\n\nexport function resolveHyperliquidAbstractionFromMode(\n  mode: HyperliquidAccountMode\n): HyperliquidAbstraction {\n  switch (mode) {\n    case \"standard\":\n      return \"disabled\";\n    case \"unified\":\n      return \"unifiedAccount\";\n    case \"portfolio\":\n      return \"portfolioMargin\";\n    default: {\n      const _exhaustive: never = mode;\n      return _exhaustive;\n    }\n  }\n}\n\nexport const DEFAULT_HYPERLIQUID_MARKET_SLIPPAGE_BPS = 30;\n\nfunction formatRoundedDecimal(value: number, decimals: number): string {\n  const precision = Math.max(0, Math.min(12, Math.floor(decimals)));\n  const factor = 10 ** precision;\n  const rounded = Math.round(value * factor) / factor;\n  if (!Number.isFinite(rounded) || rounded <= 0) {\n    throw new Error(\"Price must be positive.\");\n  }\n  const fixed = rounded.toFixed(precision);\n  return fixed.replace(/\\.?0+$/, \"\");\n}\n\nexport function computeHyperliquidMarketIocLimitPrice(params: {\n  markPrice: number;\n  side: \"buy\" | \"sell\";\n  slippageBps?: number;\n  decimals?: number;\n}): string {\n  const bps = params.slippageBps ?? DEFAULT_HYPERLIQUID_MARKET_SLIPPAGE_BPS;\n  const decimals = params.decimals ?? 6;\n  if (!Number.isFinite(params.markPrice) || params.markPrice <= 0) {\n    throw new Error(\"markPrice must be a positive number.\");\n  }\n  if (!Number.isFinite(bps) || bps < 0) {\n    throw new Error(\"slippageBps must be a non-negative number.\");\n  }\n  const slippage = bps / 10_000;\n  const multiplier = params.side === \"buy\" ? 1 + slippage : 1 - slippage;\n  const price = params.markPrice * multiplier;\n  return formatRoundedDecimal(price, decimals);\n}\n\nexport interface HyperliquidTriggerOptions {\n  triggerPx: string | number | bigint;\n  isMarket?: boolean;\n  tpsl: HyperliquidTriggerType;\n}\n\nexport interface HyperliquidBuilderFee {\n  address: `0x${string}`;\n  /**\n   * Fee in tenths of basis points (10 = 1bp = 0.01%). Max defaults to 0.1% (100).\n   */\n  fee: number;\n}\n\nexport interface HyperliquidOrderIntent {\n  symbol: string;\n  side: \"buy\" | \"sell\";\n  price: string | number | bigint;\n  size: string | number | bigint;\n  tif?: HyperliquidTimeInForce;\n  reduceOnly?: boolean;\n  clientId?: `0x${string}`;\n  trigger?: HyperliquidTriggerOptions;\n}\n\ntype MetaResponse = {\n  universe: Array<{\n    name: string;\n  }>;\n};\n\ntype SpotUniverseItem = {\n  tokens?: number[];\n  name?: string;\n  index?: number;\n  baseToken?: number;\n  quoteToken?: number;\n  isCanonical?: boolean;\n};\n\ntype SpotToken = {\n  name?: string;\n  index?: number;\n  szDecimals?: number;\n  isCanonical?: boolean;\n};\n\ntype SpotMetaResponse = {\n  universe?: SpotUniverseItem[];\n  tokens?: SpotToken[];\n};\n\ntype PerpDexsResponse = Array<{ name: string } | null>;\n\nexport type ExchangeOrderAction = {\n  type: \"order\";\n  orders: Array<{\n    a: number;\n    b: boolean;\n    p: string;\n    s: string;\n    r: boolean;\n    t:\n      | { limit: { tif: HyperliquidTimeInForce } }\n      | {\n          trigger: {\n            isMarket: boolean;\n            triggerPx: string;\n            tpsl: HyperliquidTriggerType;\n          };\n        };\n    c?: `0x${string}`;\n  }>;\n  grouping: HyperliquidGrouping;\n  builder?: {\n    b: `0x${string}`;\n    f: number;\n  };\n};\n\nexport type ExchangeSignature = {\n  r: `0x${string}`;\n  s: `0x${string}`;\n  v: 27 | 28;\n};\n\nexport type HyperliquidUserPortfolioMarginAction = {\n  type: \"userPortfolioMargin\";\n  enabled: boolean;\n  hyperliquidChain: string;\n  signatureChainId: string;\n  user: `0x${string}`;\n  nonce: number;\n};\n\nexport type HyperliquidUserDexAbstractionAction = {\n  type: \"userDexAbstraction\";\n  enabled: boolean;\n  hyperliquidChain: string;\n  signatureChainId: string;\n  user: `0x${string}`;\n  nonce: number;\n};\n\nexport type HyperliquidUserSetAbstractionAction = {\n  type: \"userSetAbstraction\";\n  abstraction: HyperliquidAbstraction;\n  hyperliquidChain: string;\n  signatureChainId: string;\n  user: `0x${string}`;\n  nonce: number;\n};\n\nexport type HyperliquidExchangeResponse<T = unknown> = {\n  status: string;\n  response?: {\n    type: string;\n    data?: T;\n  };\n  error?: string;\n};\n\nexport type NonceSource = () => number;\n\nexport class HyperliquidApiError extends Error {\n  constructor(message: string, public readonly response: unknown) {\n    super(message);\n    this.name = \"HyperliquidApiError\";\n  }\n}\n\nexport class HyperliquidGuardError extends Error {\n  constructor(message: string) {\n    super(message);\n    this.name = \"HyperliquidGuardError\";\n  }\n}\n\nexport class HyperliquidTermsError extends HyperliquidGuardError {\n  constructor(\n    message = \"Hyperliquid terms must be accepted before proceeding.\"\n  ) {\n    super(message);\n    this.name = \"HyperliquidTermsError\";\n  }\n}\n\nexport class HyperliquidBuilderApprovalError extends HyperliquidGuardError {\n  constructor(\n    message = \"Hyperliquid builder approval is required before using builder codes.\"\n  ) {\n    super(message);\n    this.name = \"HyperliquidBuilderApprovalError\";\n  }\n}\n\nexport function createMonotonicNonceFactory(\n  start: number = Date.now()\n): NonceSource {\n  let last = start;\n  return () => {\n    const now = Date.now();\n    if (now > last) {\n      last = now;\n    } else {\n      last += 1;\n    }\n    return last;\n  };\n}\n\nexport async function getUniverse(args: {\n  baseUrl: string;\n  environment: HyperliquidEnvironment;\n  fetcher: typeof fetch;\n  dex?: string;\n}): Promise<MetaResponse[\"universe\"]> {\n  const dexKey = args.dex ? args.dex.trim().toLowerCase() : \"\";\n  const cacheKey = `${args.environment}:${args.baseUrl}:${dexKey}`;\n  const cached = metaCache.get(cacheKey);\n  if (cached && Date.now() - cached.fetchedAt < CACHE_TTL_MS) {\n    return cached.universe;\n  }\n\n  const response = await args.fetcher(`${args.baseUrl}/info`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify(\n      dexKey ? { type: \"meta\", dex: dexKey } : { type: \"meta\" }\n    ),\n  });\n\n  const json = (await response.json().catch(() => null)) as MetaResponse | null;\n  if (!response.ok || !json?.universe) {\n    throw new HyperliquidApiError(\n      \"Unable to load Hyperliquid metadata.\",\n      json ?? { status: response.status }\n    );\n  }\n\n  metaCache.set(cacheKey, { fetchedAt: Date.now(), universe: json.universe });\n  return json.universe;\n}\n\nasync function getSpotMeta(args: {\n  baseUrl: string;\n  environment: HyperliquidEnvironment;\n  fetcher: typeof fetch;\n}): Promise<{ universe: SpotUniverseItem[]; tokens: SpotToken[] }> {\n  const cacheKey = `${args.environment}:${args.baseUrl}`;\n  const cached = spotMetaCache.get(cacheKey);\n  if (cached && Date.now() - cached.fetchedAt < CACHE_TTL_MS) {\n    return { universe: cached.universe, tokens: cached.tokens };\n  }\n\n  const response = await args.fetcher(`${args.baseUrl}/info`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({ type: \"spotMeta\" }),\n  });\n\n  const json = (await response.json().catch(() => null)) as\n    | SpotMetaResponse\n    | null;\n  if (!response.ok || !json?.universe) {\n    throw new HyperliquidApiError(\n      \"Unable to load Hyperliquid spot metadata.\",\n      json ?? { status: response.status }\n    );\n  }\n\n  const universe = json.universe ?? [];\n  const tokens = json.tokens ?? [];\n  spotMetaCache.set(cacheKey, { fetchedAt: Date.now(), universe, tokens });\n  return { universe, tokens };\n}\n\nexport function resolveAssetIndex(\n  symbol: string,\n  universe: MetaResponse[\"universe\"]\n): number {\n  const [raw] = symbol.split(\"-\");\n  const target = raw.trim();\n  const index = universe.findIndex(\n    (entry) => entry.name.toUpperCase() === target.toUpperCase()\n  );\n  if (index === -1) {\n    throw new Error(`Unknown Hyperliquid asset symbol: ${symbol}`);\n  }\n  return index;\n}\n\nasync function getPerpDexs(args: {\n  baseUrl: string;\n  environment: HyperliquidEnvironment;\n  fetcher: typeof fetch;\n}): Promise<PerpDexsResponse> {\n  const cacheKey = `${args.environment}:${args.baseUrl}`;\n  const cached = perpDexsCache.get(cacheKey);\n  if (cached && Date.now() - cached.fetchedAt < CACHE_TTL_MS) {\n    return cached.dexs;\n  }\n\n  const response = await args.fetcher(`${args.baseUrl}/info`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({ type: \"perpDexs\" }),\n  });\n  const json = (await response.json().catch(() => null)) as\n    | PerpDexsResponse\n    | null;\n  if (!response.ok || !Array.isArray(json)) {\n    throw new HyperliquidApiError(\n      \"Unable to load Hyperliquid perp dex metadata.\",\n      json ?? { status: response.status }\n    );\n  }\n\n  perpDexsCache.set(cacheKey, { fetchedAt: Date.now(), dexs: json });\n  return json;\n}\n\nasync function resolveDexIndex(args: {\n  baseUrl: string;\n  environment: HyperliquidEnvironment;\n  fetcher: typeof fetch;\n  dex: string;\n}): Promise<number> {\n  const dexs = await getPerpDexs(args);\n  const target = args.dex.trim().toLowerCase();\n  const index = dexs.findIndex(\n    (entry) => entry?.name?.toLowerCase() === target\n  );\n  if (index === -1) {\n    throw new Error(`Unknown Hyperliquid perp dex: ${args.dex}`);\n  }\n  return index;\n}\n\nfunction buildSpotTokenIndexMap(tokens: SpotToken[]): Map<string, number> {\n  const map = new Map<string, number>();\n  for (const token of tokens) {\n    const name = normalizeSpotTokenName(token?.name);\n    const index =\n      typeof token?.index === \"number\" && Number.isFinite(token.index)\n        ? token.index\n        : null;\n    if (!name || index == null) continue;\n    if (!map.has(name) || token?.isCanonical) {\n      map.set(name, index);\n    }\n  }\n  return map;\n}\n\nfunction resolveSpotTokenIndex(\n  tokenMap: Map<string, number>,\n  value: string\n): number | null {\n  const normalized = normalizeSpotTokenName(value);\n  if (!normalized) return null;\n  const direct = tokenMap.get(normalized);\n  if (direct != null) return direct;\n  if (!normalized.startsWith(\"U\")) {\n    const prefixed = tokenMap.get(`U${normalized}`);\n    if (prefixed != null) return prefixed;\n  }\n  return null;\n}\n\nfunction resolveSpotMarketIndex(args: {\n  universe: SpotUniverseItem[];\n  baseToken: number;\n  quoteToken: number;\n}): number | null {\n  for (let i = 0; i < args.universe.length; i += 1) {\n    const entry = args.universe[i];\n    const tokens = Array.isArray(entry?.tokens) ? entry.tokens : null;\n    const baseToken = tokens?.[0] ?? entry?.baseToken ?? null;\n    const quoteToken = tokens?.[1] ?? entry?.quoteToken ?? null;\n    if (baseToken === args.baseToken && quoteToken === args.quoteToken) {\n      if (typeof entry?.index === \"number\" && Number.isFinite(entry.index)) {\n        return entry.index;\n      }\n      return i;\n    }\n  }\n  return null;\n}\n\nexport async function resolveHyperliquidAssetIndex(args: {\n  symbol: string;\n  baseUrl: string;\n  environment: HyperliquidEnvironment;\n  fetcher: typeof fetch;\n}): Promise<number> {\n  const trimmed = args.symbol.trim();\n  if (!trimmed) {\n    throw new Error(\"Hyperliquid symbol must be a non-empty string.\");\n  }\n\n  if (trimmed.startsWith(\"@\")) {\n    const rawIndex = trimmed.slice(1).trim();\n    const index = Number(rawIndex);\n    if (!Number.isFinite(index)) {\n      throw new Error(`Hyperliquid spot market index is invalid: ${trimmed}`);\n    }\n    return 10000 + index;\n  }\n\n  const separator = trimmed.indexOf(\":\");\n  if (separator > 0) {\n    const dex = trimmed.slice(0, separator).trim();\n    if (!dex) {\n      throw new Error(\"Hyperliquid dex name is required.\");\n    }\n    const dexIndex = await resolveDexIndex({\n      baseUrl: args.baseUrl,\n      environment: args.environment,\n      fetcher: args.fetcher,\n      dex,\n    });\n    const universe = await getUniverse({\n      baseUrl: args.baseUrl,\n      environment: args.environment,\n      fetcher: args.fetcher,\n      dex,\n    });\n    const assetIndex = universe.findIndex(\n      (entry) => entry.name.toUpperCase() === trimmed.toUpperCase()\n    );\n    if (assetIndex === -1) {\n      throw new Error(`Unknown Hyperliquid asset symbol: ${trimmed}`);\n    }\n    return 100000 + dexIndex * 10000 + assetIndex;\n  }\n\n  const pair = parseHyperliquidPair(trimmed);\n  if (pair) {\n    const { universe, tokens } = await getSpotMeta({\n      baseUrl: args.baseUrl,\n      environment: args.environment,\n      fetcher: args.fetcher,\n    });\n    const tokenMap = buildSpotTokenIndexMap(tokens);\n    const baseToken = resolveSpotTokenIndex(tokenMap, pair.base);\n    const quoteToken = resolveSpotTokenIndex(tokenMap, pair.quote);\n    if (baseToken == null || quoteToken == null) {\n      throw new Error(`Unknown Hyperliquid spot symbol: ${trimmed}`);\n    }\n    const marketIndex = resolveSpotMarketIndex({\n      universe,\n      baseToken,\n      quoteToken,\n    });\n    if (marketIndex == null) {\n      throw new Error(`Unknown Hyperliquid spot symbol: ${trimmed}`);\n    }\n    return 10000 + marketIndex;\n  }\n\n  const universe = await getUniverse({\n    baseUrl: args.baseUrl,\n    environment: args.environment,\n    fetcher: args.fetcher,\n  });\n  return resolveAssetIndex(trimmed, universe);\n}\n\nexport function toApiDecimal(value: string | number | bigint): string {\n  if (typeof value === \"string\") {\n    return value;\n  }\n\n  if (typeof value === \"bigint\") {\n    return value.toString();\n  }\n\n  if (!Number.isFinite(value)) {\n    throw new Error(\"Numeric values must be finite.\");\n  }\n\n  const asString = value.toString();\n  if (/e/i.test(asString)) {\n    const [mantissa, exponentPart] = asString.split(/e/i);\n    const exponent = Number(exponentPart);\n    const [integerPart, fractionalPart = \"\"] = mantissa.split(\".\");\n    if (exponent >= 0) {\n      return (\n        integerPart +\n        fractionalPart.padEnd(exponent + fractionalPart.length, \"0\")\n      );\n    }\n    const zeros = \"0\".repeat(Math.abs(exponent) - 1);\n    return `0.${zeros}${integerPart}${fractionalPart}`.replace(/\\.0+$/, \"\");\n  }\n\n  return asString;\n}\n\nconst NORMALIZED_HEX_PATTERN = /^0x[0-9a-f]+$/;\nconst ADDRESS_HEX_LENGTH = 42;\nconst CLOID_HEX_LENGTH = 34;\n\nexport function normalizeHex(value: `0x${string}`): `0x${string}` {\n  const lower = value.trim().toLowerCase() as `0x${string}`;\n  if (!NORMALIZED_HEX_PATTERN.test(lower)) {\n    throw new Error(`Invalid hex value: ${value}`);\n  }\n  return lower;\n}\n\nexport function normalizeAddress(value: `0x${string}`): `0x${string}` {\n  const normalized = normalizeHex(value);\n  if (normalized.length !== ADDRESS_HEX_LENGTH) {\n    throw new Error(`Invalid address length: ${normalized}`);\n  }\n  return normalized;\n}\n\nexport function normalizeCloid(value: `0x${string}`): `0x${string}` {\n  const normalized = normalizeHex(value);\n  if (normalized.length !== CLOID_HEX_LENGTH) {\n    throw new Error(`Invalid cloid length: ${normalized}`);\n  }\n  return normalized;\n}\n\nexport async function signL1Action(args: {\n  wallet: WalletFullContext;\n  action: ExchangeOrderAction | Record<string, unknown>;\n  nonce: number;\n  vaultAddress?: `0x${string}` | undefined;\n  expiresAfter?: number | undefined;\n  isTestnet: boolean;\n}): Promise<ExchangeSignature> {\n  const { wallet, action, nonce, vaultAddress, expiresAfter, isTestnet } = args;\n\n  const actionHash = createL1ActionHash({\n    action,\n    nonce,\n    vaultAddress,\n    expiresAfter,\n  });\n  const message = {\n    source: isTestnet ? \"b\" : \"a\",\n    connectionId: actionHash,\n  } as const;\n\n  const signatureHex = await wallet.walletClient.signTypedData({\n    account: wallet.account,\n    domain: EXCHANGE_TYPED_DATA_DOMAIN,\n    types: {\n      Agent: [\n        { name: \"source\", type: \"string\" },\n        { name: \"connectionId\", type: \"bytes32\" },\n      ],\n    },\n    primaryType: \"Agent\",\n    message,\n  });\n\n  return splitSignature(signatureHex);\n}\n\nexport async function signSpotSend(args: {\n  wallet: WalletFullContext;\n  hyperliquidChain: string;\n  signatureChainId: string;\n  destination: `0x${string}`;\n  token: string;\n  amount: string;\n  time: bigint;\n}): Promise<ExchangeSignature> {\n  const {\n    wallet,\n    hyperliquidChain,\n    signatureChainId,\n    destination,\n    token,\n    amount,\n    time,\n  } = args;\n  const domain = {\n    name: \"HyperliquidSignTransaction\",\n    version: \"1\",\n    chainId: Number.parseInt(signatureChainId, 16),\n    verifyingContract: ZERO_ADDRESS,\n  } as const;\n\n  const message = {\n    hyperliquidChain,\n    destination,\n    token,\n    amount,\n    time,\n  };\n\n  const types = {\n    \"HyperliquidTransaction:SpotSend\": [\n      { name: \"hyperliquidChain\", type: \"string\" },\n      { name: \"destination\", type: \"string\" },\n      { name: \"token\", type: \"string\" },\n      { name: \"amount\", type: \"string\" },\n      { name: \"time\", type: \"uint64\" },\n    ],\n  } as const;\n\n  const signatureHex = await wallet.walletClient.signTypedData({\n    account: wallet.account,\n    domain,\n    types,\n    primaryType: \"HyperliquidTransaction:SpotSend\",\n    message,\n  });\n\n  return splitSignature(signatureHex);\n}\n\nexport async function signApproveBuilderFee(args: {\n  wallet: WalletFullContext;\n  maxFeeRate: string;\n  nonce: bigint;\n  signatureChainId: string;\n  isTestnet: boolean;\n}): Promise<ExchangeSignature> {\n  const { wallet, maxFeeRate, nonce, signatureChainId, isTestnet } = args;\n\n  const hyperliquidChain = isTestnet ? \"Testnet\" : \"Mainnet\";\n  const domain = {\n    name: \"HyperliquidSignTransaction\",\n    version: \"1\",\n    chainId: Number.parseInt(signatureChainId, 16),\n    verifyingContract: ZERO_ADDRESS,\n  } as const;\n\n  const message = {\n    hyperliquidChain,\n    maxFeeRate,\n    builder: BUILDER_CODE.address,\n    nonce,\n  };\n\n  const types = {\n    \"HyperliquidTransaction:ApproveBuilderFee\": [\n      { name: \"hyperliquidChain\", type: \"string\" },\n      { name: \"maxFeeRate\", type: \"string\" },\n      { name: \"builder\", type: \"address\" },\n      { name: \"nonce\", type: \"uint64\" },\n    ],\n  } as const;\n\n  const signatureHex = await wallet.walletClient.signTypedData({\n    account: wallet.account,\n    domain,\n    types,\n    primaryType: \"HyperliquidTransaction:ApproveBuilderFee\",\n    message,\n  });\n\n  return splitSignature(signatureHex);\n}\n\nexport async function signUserPortfolioMargin(args: {\n  wallet: WalletFullContext;\n  action: HyperliquidUserPortfolioMarginAction;\n}): Promise<ExchangeSignature> {\n  const { wallet, action } = args;\n  const domain = {\n    name: \"HyperliquidSignTransaction\",\n    version: \"1\",\n    chainId: Number.parseInt(action.signatureChainId, 16),\n    verifyingContract: ZERO_ADDRESS,\n  } as const;\n\n  const message = {\n    enabled: action.enabled,\n    hyperliquidChain: action.hyperliquidChain,\n    user: action.user,\n    nonce: BigInt(action.nonce),\n  };\n\n  const types = {\n    \"HyperliquidTransaction:UserPortfolioMargin\": [\n      { name: \"enabled\", type: \"bool\" },\n      { name: \"hyperliquidChain\", type: \"string\" },\n      { name: \"user\", type: \"address\" },\n      { name: \"nonce\", type: \"uint64\" },\n    ],\n  } as const;\n\n  const signatureHex = await wallet.walletClient.signTypedData({\n    account: wallet.account,\n    domain,\n    types,\n    primaryType: \"HyperliquidTransaction:UserPortfolioMargin\",\n    message,\n  });\n\n  return splitSignature(signatureHex);\n}\n\nexport async function signUserDexAbstraction(args: {\n  wallet: WalletFullContext;\n  action: HyperliquidUserDexAbstractionAction;\n}): Promise<ExchangeSignature> {\n  const { wallet, action } = args;\n  const domain = {\n    name: \"HyperliquidSignTransaction\",\n    version: \"1\",\n    chainId: Number.parseInt(action.signatureChainId, 16),\n    verifyingContract: ZERO_ADDRESS,\n  } as const;\n\n  const message = {\n    hyperliquidChain: action.hyperliquidChain,\n    user: action.user,\n    enabled: action.enabled,\n    nonce: BigInt(action.nonce),\n  };\n\n  const types = {\n    \"HyperliquidTransaction:UserDexAbstraction\": [\n      { name: \"hyperliquidChain\", type: \"string\" },\n      { name: \"user\", type: \"address\" },\n      { name: \"enabled\", type: \"bool\" },\n      { name: \"nonce\", type: \"uint64\" },\n    ],\n  } as const;\n\n  const signatureHex = await wallet.walletClient.signTypedData({\n    account: wallet.account,\n    domain,\n    types,\n    primaryType: \"HyperliquidTransaction:UserDexAbstraction\",\n    message,\n  });\n\n  return splitSignature(signatureHex);\n}\n\nexport async function signUserSetAbstraction(args: {\n  wallet: WalletFullContext;\n  action: HyperliquidUserSetAbstractionAction;\n}): Promise<ExchangeSignature> {\n  const { wallet, action } = args;\n  const domain = {\n    name: \"HyperliquidSignTransaction\",\n    version: \"1\",\n    chainId: Number.parseInt(action.signatureChainId, 16),\n    verifyingContract: ZERO_ADDRESS,\n  } as const;\n\n  const message = {\n    hyperliquidChain: action.hyperliquidChain,\n    user: action.user,\n    abstraction: action.abstraction,\n    nonce: BigInt(action.nonce),\n  };\n\n  const types = {\n    \"HyperliquidTransaction:UserSetAbstraction\": [\n      { name: \"hyperliquidChain\", type: \"string\" },\n      { name: \"user\", type: \"address\" },\n      { name: \"abstraction\", type: \"string\" },\n      { name: \"nonce\", type: \"uint64\" },\n    ],\n  } as const;\n\n  const signatureHex = await wallet.walletClient.signTypedData({\n    account: wallet.account,\n    domain,\n    types,\n    primaryType: \"HyperliquidTransaction:UserSetAbstraction\",\n    message,\n  });\n\n  return splitSignature(signatureHex);\n}\n\nexport function splitSignature(signature: `0x${string}`): ExchangeSignature {\n  const cleaned = signature.slice(2);\n  const rHex = `0x${cleaned.slice(0, 64)}` as `0x${string}`;\n  const sHex = `0x${cleaned.slice(64, 128)}` as `0x${string}`;\n  let v = parseInt(cleaned.slice(128, 130), 16);\n  if (Number.isNaN(v)) {\n    throw new Error(\"Invalid signature returned by wallet client.\");\n  }\n  if (v < 27) {\n    v += 27;\n  }\n  const normalizedV = (v === 27 || v === 28 ? v : v % 2 ? 27 : 28) as 27 | 28;\n  return {\n    r: normalizeHex(rHex),\n    s: normalizeHex(sHex),\n    v: normalizedV,\n  };\n}\n\nexport function createL1ActionHash(args: {\n  action: ExchangeOrderAction | Record<string, unknown>;\n  nonce: number;\n  vaultAddress?: `0x${string}` | undefined;\n  expiresAfter?: number | undefined;\n}): `0x${string}` {\n  const { action, nonce, vaultAddress, expiresAfter } = args;\n\n  const actionBytes = encodeMsgpack(action, { ignoreUndefined: true });\n  const nonceBytes = toUint64Bytes(nonce);\n\n  const vaultMarker = vaultAddress ? new Uint8Array([1]) : new Uint8Array([0]);\n  const vaultBytes = vaultAddress\n    ? hexToBytes(vaultAddress.slice(2))\n    : new Uint8Array();\n\n  const hasExpiresAfter = typeof expiresAfter === \"number\";\n  const expiresMarker = hasExpiresAfter\n    ? new Uint8Array([0])\n    : new Uint8Array();\n  const expiresBytes =\n    hasExpiresAfter && expiresAfter !== undefined\n      ? toUint64Bytes(expiresAfter)\n      : new Uint8Array();\n\n  const bytes = concatBytes(\n    actionBytes,\n    nonceBytes,\n    vaultMarker,\n    vaultBytes,\n    expiresMarker,\n    expiresBytes\n  );\n  const hash = keccak_256(bytes);\n  return `0x${bytesToHex(hash)}`;\n}\n\nexport function toUint64Bytes(value: number): Uint8Array {\n  const bytes = new Uint8Array(8);\n  new DataView(bytes.buffer).setBigUint64(0, BigInt(value));\n  return bytes;\n}\n\nexport function getBridgeAddress(env: HyperliquidEnvironment): `0x${string}` {\n  const override = process.env.HYPERLIQUID_BRIDGE_ADDRESS;\n  if (override?.trim()) {\n    return normalizeAddress(override as `0x${string}`);\n  }\n  return HL_BRIDGE_ADDRESSES[env];\n}\n\nexport function getUsdcAddress(env: HyperliquidEnvironment): `0x${string}` {\n  const override = process.env.HYPERLIQUID_USDC_ADDRESS;\n  if (override?.trim()) {\n    return normalizeAddress(override as `0x${string}`);\n  }\n  return HL_USDC_ADDRESSES[env];\n}\n\nexport function getSignatureChainId(env: HyperliquidEnvironment): string {\n  const override = process.env.HYPERLIQUID_SIGNATURE_CHAIN_ID;\n  const selected = override?.trim() || HL_SIGNATURE_CHAIN_ID[env];\n  return normalizeHex(selected as `0x${string}`);\n}\n\nexport function getBaseUrl(environment: HyperliquidEnvironment): string {\n  return API_BASES[environment];\n}\n\nexport function assertPositiveNumber(\n  value: number,\n  label: string\n): asserts value is number {\n  if (!Number.isFinite(value) || value <= 0) {\n    throw new Error(`${label} must be a positive number.`);\n  }\n}\n","import {\n  API_BASES,\n  HyperliquidApiError,\n  HyperliquidEnvironment,\n  normalizeAddress,\n} from \"./base\";\n\ntype InfoPayload =\n  | { type: \"meta\" }\n  | { type: \"metaAndAssetCtxs\" }\n  | { type: \"spotMeta\" }\n  | { type: \"spotMetaAndAssetCtxs\" }\n  | { type: \"assetCtxs\" }\n  | { type: \"spotAssetCtxs\" }\n  | { type: \"openOrders\"; user: `0x${string}` }\n  | { type: \"frontendOpenOrders\"; user: `0x${string}` }\n  | { type: \"orderStatus\"; user: `0x${string}`; oid: number | string }\n  | { type: \"historicalOrders\"; user: `0x${string}` }\n  | { type: \"userHistoricalOrders\"; user: `0x${string}` }\n  | { type: \"userFills\"; user: `0x${string}` }\n  | {\n      type: \"userFillsByTime\";\n      user: `0x${string}`;\n      startTime: number;\n      endTime: number;\n    }\n  | { type: \"userRateLimit\"; user: `0x${string}` }\n  | { type: \"preTransferCheck\"; user: `0x${string}`; source: `0x${string}` }\n  | { type: \"spotClearinghouseState\"; user: `0x${string}` };\n\nasync function postInfo(environment: HyperliquidEnvironment, payload: InfoPayload) {\n  const baseUrl = API_BASES[environment];\n  const response = await fetch(`${baseUrl}/info`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify(payload),\n  });\n\n  const data = await response.json().catch(() => null);\n  if (!response.ok) {\n    throw new HyperliquidApiError(\n      \"Hyperliquid info request failed.\",\n      data ?? { status: response.status }\n    );\n  }\n  return data;\n}\n\nexport class HyperliquidInfoClient {\n  private readonly environment: HyperliquidEnvironment;\n\n  constructor(environment: HyperliquidEnvironment = \"mainnet\") {\n    this.environment = environment;\n  }\n\n  meta() {\n    return fetchHyperliquidMeta(this.environment);\n  }\n\n  metaAndAssetCtxs() {\n    return fetchHyperliquidMetaAndAssetCtxs(this.environment);\n  }\n\n  spotMeta() {\n    return fetchHyperliquidSpotMeta(this.environment);\n  }\n\n  spotMetaAndAssetCtxs() {\n    return fetchHyperliquidSpotMetaAndAssetCtxs(this.environment);\n  }\n\n  assetCtxs() {\n    return fetchHyperliquidAssetCtxs(this.environment);\n  }\n\n  spotAssetCtxs() {\n    return fetchHyperliquidSpotAssetCtxs(this.environment);\n  }\n\n  openOrders(user: `0x${string}`) {\n    return fetchHyperliquidOpenOrders({ user, environment: this.environment });\n  }\n\n  frontendOpenOrders(user: `0x${string}`) {\n    return fetchHyperliquidFrontendOpenOrders({\n      user,\n      environment: this.environment,\n    });\n  }\n\n  orderStatus(user: `0x${string}`, oid: number | string) {\n    return fetchHyperliquidOrderStatus({\n      user,\n      oid,\n      environment: this.environment,\n    });\n  }\n\n  historicalOrders(user: `0x${string}`) {\n    return fetchHyperliquidHistoricalOrders({\n      user,\n      environment: this.environment,\n    });\n  }\n\n  userFills(user: `0x${string}`) {\n    return fetchHyperliquidUserFills({ user, environment: this.environment });\n  }\n\n  userFillsByTime(user: `0x${string}`, startTime: number, endTime: number) {\n    return fetchHyperliquidUserFillsByTime({\n      user,\n      startTime,\n      endTime,\n      environment: this.environment,\n    });\n  }\n\n  userRateLimit(user: `0x${string}`) {\n    return fetchHyperliquidUserRateLimit({\n      user,\n      environment: this.environment,\n    });\n  }\n\n  preTransferCheck(user: `0x${string}`, source: `0x${string}`) {\n    return fetchHyperliquidPreTransferCheck({\n      user,\n      source,\n      environment: this.environment,\n    });\n  }\n\n  spotClearinghouseState(user: `0x${string}`) {\n    return fetchHyperliquidSpotClearinghouseState({\n      user,\n      environment: this.environment,\n    });\n  }\n}\n\nexport async function fetchHyperliquidMeta(environment: HyperliquidEnvironment = \"mainnet\") {\n  return postInfo(environment, { type: \"meta\" });\n}\n\nexport async function fetchHyperliquidMetaAndAssetCtxs(\n  environment: HyperliquidEnvironment = \"mainnet\"\n) {\n  return postInfo(environment, { type: \"metaAndAssetCtxs\" });\n}\n\nexport async function fetchHyperliquidSpotMeta(\n  environment: HyperliquidEnvironment = \"mainnet\"\n) {\n  return postInfo(environment, { type: \"spotMeta\" });\n}\n\nexport async function fetchHyperliquidSpotMetaAndAssetCtxs(\n  environment: HyperliquidEnvironment = \"mainnet\"\n) {\n  return postInfo(environment, { type: \"spotMetaAndAssetCtxs\" });\n}\n\nexport async function fetchHyperliquidAssetCtxs(\n  environment: HyperliquidEnvironment = \"mainnet\"\n) {\n  return postInfo(environment, { type: \"assetCtxs\" });\n}\n\nexport async function fetchHyperliquidSpotAssetCtxs(\n  environment: HyperliquidEnvironment = \"mainnet\"\n) {\n  return postInfo(environment, { type: \"spotAssetCtxs\" });\n}\n\nexport async function fetchHyperliquidOpenOrders(params: {\n  environment?: HyperliquidEnvironment;\n  user: `0x${string}`;\n}) {\n  const env = params.environment ?? \"mainnet\";\n  return postInfo(env, { type: \"openOrders\", user: normalizeAddress(params.user) });\n}\n\nexport async function fetchHyperliquidFrontendOpenOrders(params: {\n  environment?: HyperliquidEnvironment;\n  user: `0x${string}`;\n}) {\n  const env = params.environment ?? \"mainnet\";\n  return postInfo(env, {\n    type: \"frontendOpenOrders\",\n    user: normalizeAddress(params.user),\n  });\n}\n\nexport async function fetchHyperliquidOrderStatus(params: {\n  environment?: HyperliquidEnvironment;\n  user: `0x${string}`;\n  oid: number | string;\n}) {\n  const env = params.environment ?? \"mainnet\";\n  return postInfo(env, {\n    type: \"orderStatus\",\n    user: normalizeAddress(params.user),\n    oid: params.oid,\n  });\n}\n\nexport async function fetchHyperliquidHistoricalOrders(params: {\n  environment?: HyperliquidEnvironment;\n  user: `0x${string}`;\n}) {\n  const env = params.environment ?? \"mainnet\";\n  return postInfo(env, {\n    type: \"historicalOrders\",\n    user: normalizeAddress(params.user),\n  });\n}\n\nexport async function fetchHyperliquidUserFills(params: {\n  environment?: HyperliquidEnvironment;\n  user: `0x${string}`;\n}) {\n  const env = params.environment ?? \"mainnet\";\n  return postInfo(env, {\n    type: \"userFills\",\n    user: normalizeAddress(params.user),\n  });\n}\n\nexport async function fetchHyperliquidUserFillsByTime(params: {\n  environment?: HyperliquidEnvironment;\n  user: `0x${string}`;\n  startTime: number;\n  endTime: number;\n}) {\n  const env = params.environment ?? \"mainnet\";\n  return postInfo(env, {\n    type: \"userFillsByTime\",\n    user: normalizeAddress(params.user),\n    startTime: params.startTime,\n    endTime: params.endTime,\n  });\n}\n\nexport async function fetchHyperliquidUserRateLimit(params: {\n  environment?: HyperliquidEnvironment;\n  user: `0x${string}`;\n}) {\n  const env = params.environment ?? \"mainnet\";\n  return postInfo(env, {\n    type: \"userRateLimit\",\n    user: normalizeAddress(params.user),\n  });\n}\n\nexport async function fetchHyperliquidPreTransferCheck(params: {\n  environment?: HyperliquidEnvironment;\n  user: `0x${string}`;\n  source: `0x${string}`;\n}) {\n  const env = params.environment ?? \"mainnet\";\n  return postInfo(env, {\n    type: \"preTransferCheck\",\n    user: normalizeAddress(params.user),\n    source: normalizeAddress(params.source),\n  });\n}\n\nexport async function fetchHyperliquidSpotClearinghouseState(params: {\n  environment?: HyperliquidEnvironment;\n  user: `0x${string}`;\n}) {\n  const env = params.environment ?? \"mainnet\";\n  return postInfo(env, {\n    type: \"spotClearinghouseState\",\n    user: normalizeAddress(params.user),\n  });\n}\n","import type { WalletFullContext } from \"../../wallet/types\";\nimport {\n  API_BASES,\n  HL_CHAIN_LABEL,\n  HyperliquidApiError,\n  type HyperliquidAbstraction,\n  type HyperliquidAccountMode,\n  HyperliquidEnvironment,\n  HyperliquidGrouping,\n  HyperliquidOrderIntent,\n  HyperliquidTriggerOptions,\n  type ExchangeOrderAction,\n  type ExchangeSignature,\n  type HyperliquidUserDexAbstractionAction,\n  type HyperliquidUserPortfolioMarginAction,\n  type HyperliquidUserSetAbstractionAction,\n  type NonceSource,\n  type HyperliquidExchangeResponse,\n  assertPositiveNumber,\n  normalizeCloid,\n  getSignatureChainId,\n  normalizeAddress,\n  resolveHyperliquidAbstractionFromMode,\n  resolveHyperliquidAssetIndex,\n  signL1Action,\n  signUserDexAbstraction,\n  signUserPortfolioMargin,\n  signUserSetAbstraction,\n  signSpotSend,\n  toApiDecimal,\n} from \"./base\";\n\ntype CommonActionOptions = {\n  environment?: HyperliquidEnvironment;\n  vaultAddress?: `0x${string}` | undefined;\n  expiresAfter?: number | undefined;\n  nonce?: number | undefined;\n  nonceSource?: NonceSource | undefined;\n  /**\n   * Optional per-wallet nonce provider (preferred if available).\n   */\n  walletNonceProvider?: NonceSource | undefined;\n};\n\ntype CancelInput = { symbol: string; oid: number | string };\ntype CancelByCloidInput = { symbol: string; cloid: `0x${string}` };\n\ntype ModifyOrderInput = {\n  oid: number | `0x${string}`;\n  order: HyperliquidOrderIntent;\n};\n\ntype TwapOrderInput = {\n  symbol: string;\n  side: \"buy\" | \"sell\";\n  size: string | number | bigint;\n  reduceOnly?: boolean;\n  minutes: number;\n  randomize?: boolean;\n};\n\ntype TwapCancelInput = {\n  symbol: string;\n  twapId: number;\n};\n\ntype UpdateLeverageInput = {\n  symbol: string;\n  leverageMode: \"cross\" | \"isolated\";\n  leverage: number;\n};\n\ntype UpdateIsolatedMarginInput = {\n  symbol: string;\n  isBuy: boolean;\n  ntli: number;\n};\n\nexport class HyperliquidExchangeClient {\n  private readonly nonceSource: NonceSource;\n  private readonly environment: HyperliquidEnvironment;\n  private readonly vaultAddress: `0x${string}` | undefined;\n  private readonly expiresAfter: number | undefined;\n  private readonly wallet: WalletFullContext;\n\n  constructor(args: {\n    wallet: WalletFullContext;\n    environment?: HyperliquidEnvironment;\n    vaultAddress?: `0x${string}`;\n    expiresAfter?: number;\n    nonceSource?: NonceSource;\n    walletNonceProvider?: NonceSource;\n  }) {\n    this.wallet = args.wallet;\n    this.environment = args.environment ?? \"mainnet\";\n    this.vaultAddress = args.vaultAddress;\n    this.expiresAfter = args.expiresAfter;\n    const resolvedNonceSource =\n      args.walletNonceProvider ?? args.wallet.nonceSource ?? args.nonceSource;\n    if (!resolvedNonceSource) {\n      throw new Error(\n        \"Wallet nonce source is required for Hyperliquid exchange actions.\"\n      );\n    }\n    this.nonceSource = resolvedNonceSource;\n  }\n\n  cancel(cancels: CancelInput[]) {\n    return cancelHyperliquidOrders({\n      wallet: this.wallet,\n      cancels,\n      environment: this.environment,\n      vaultAddress: this.vaultAddress,\n      expiresAfter: this.expiresAfter,\n      nonceSource: this.nonceSource,\n    });\n  }\n\n  cancelByCloid(cancels: CancelByCloidInput[]) {\n    return cancelHyperliquidOrdersByCloid({\n      wallet: this.wallet,\n      cancels,\n      environment: this.environment,\n      vaultAddress: this.vaultAddress,\n      expiresAfter: this.expiresAfter,\n      nonceSource: this.nonceSource,\n    });\n  }\n\n  cancelAll() {\n    return cancelAllHyperliquidOrders({\n      wallet: this.wallet,\n      environment: this.environment,\n      vaultAddress: this.vaultAddress,\n      expiresAfter: this.expiresAfter,\n      nonceSource: this.nonceSource,\n    });\n  }\n\n  scheduleCancel(time: number | null) {\n    return scheduleHyperliquidCancel({\n      wallet: this.wallet,\n      time,\n      environment: this.environment,\n      vaultAddress: this.vaultAddress,\n      expiresAfter: this.expiresAfter,\n      nonceSource: this.nonceSource,\n    });\n  }\n\n  modify(modification: ModifyOrderInput) {\n    return modifyHyperliquidOrder({\n      wallet: this.wallet,\n      modification,\n      environment: this.environment,\n      vaultAddress: this.vaultAddress,\n      expiresAfter: this.expiresAfter,\n      nonceSource: this.nonceSource,\n    });\n  }\n\n  batchModify(modifications: ModifyOrderInput[]) {\n    return batchModifyHyperliquidOrders({\n      wallet: this.wallet,\n      modifications,\n      environment: this.environment,\n      vaultAddress: this.vaultAddress,\n      expiresAfter: this.expiresAfter,\n      nonceSource: this.nonceSource,\n    });\n  }\n\n  twapOrder(twap: TwapOrderInput) {\n    return placeHyperliquidTwapOrder({\n      wallet: this.wallet,\n      twap,\n      environment: this.environment,\n      vaultAddress: this.vaultAddress,\n      expiresAfter: this.expiresAfter,\n      nonceSource: this.nonceSource,\n    });\n  }\n\n  twapCancel(cancel: TwapCancelInput) {\n    return cancelHyperliquidTwapOrder({\n      wallet: this.wallet,\n      cancel,\n      environment: this.environment,\n      vaultAddress: this.vaultAddress,\n      expiresAfter: this.expiresAfter,\n      nonceSource: this.nonceSource,\n    });\n  }\n\n  updateLeverage(input: UpdateLeverageInput) {\n    return updateHyperliquidLeverage({\n      wallet: this.wallet,\n      input,\n      environment: this.environment,\n      vaultAddress: this.vaultAddress,\n      expiresAfter: this.expiresAfter,\n      nonceSource: this.nonceSource,\n    });\n  }\n\n  updateIsolatedMargin(input: UpdateIsolatedMarginInput) {\n    return updateHyperliquidIsolatedMargin({\n      wallet: this.wallet,\n      input,\n      environment: this.environment,\n      vaultAddress: this.vaultAddress,\n      expiresAfter: this.expiresAfter,\n      nonceSource: this.nonceSource,\n    });\n  }\n\n  reserveRequestWeight(weight: number) {\n    return reserveHyperliquidRequestWeight({\n      wallet: this.wallet,\n      weight,\n      environment: this.environment,\n      vaultAddress: this.vaultAddress,\n      expiresAfter: this.expiresAfter,\n      nonceSource: this.nonceSource,\n    });\n  }\n\n  spotSend(params: {\n    destination: `0x${string}`;\n    token: string;\n    amount: string | number | bigint;\n  }) {\n    return sendHyperliquidSpot({\n      wallet: this.wallet,\n      environment: this.environment,\n      nonceSource: this.nonceSource,\n      ...params,\n    });\n  }\n\n  setDexAbstraction(params: { enabled: boolean; user?: `0x${string}` }) {\n    const base = {\n      wallet: this.wallet,\n      enabled: params.enabled,\n      environment: this.environment,\n      vaultAddress: this.vaultAddress,\n      expiresAfter: this.expiresAfter,\n      nonceSource: this.nonceSource,\n    } satisfies Omit<Parameters<typeof setHyperliquidDexAbstraction>[0], \"user\">;\n\n    return setHyperliquidDexAbstraction(\n      params.user ? { ...base, user: params.user } : base\n    );\n  }\n\n  setAccountAbstractionMode(params: {\n    mode: HyperliquidAccountMode;\n    user?: `0x${string}`;\n  }) {\n    const base = {\n      wallet: this.wallet,\n      mode: params.mode,\n      environment: this.environment,\n      vaultAddress: this.vaultAddress,\n      expiresAfter: this.expiresAfter,\n      nonceSource: this.nonceSource,\n    } satisfies Omit<\n      Parameters<typeof setHyperliquidAccountAbstractionMode>[0],\n      \"user\"\n    >;\n\n    return setHyperliquidAccountAbstractionMode(\n      params.user ? { ...base, user: params.user } : base\n    );\n  }\n\n  setPortfolioMargin(params: { enabled: boolean; user?: `0x${string}` }) {\n    const base = {\n      wallet: this.wallet,\n      enabled: params.enabled,\n      environment: this.environment,\n      vaultAddress: this.vaultAddress,\n      expiresAfter: this.expiresAfter,\n      nonceSource: this.nonceSource,\n    } satisfies Omit<Parameters<typeof setHyperliquidPortfolioMargin>[0], \"user\">;\n\n    return setHyperliquidPortfolioMargin(\n      params.user ? { ...base, user: params.user } : base\n    );\n  }\n}\n\nexport async function setHyperliquidPortfolioMargin(options: {\n  wallet: WalletFullContext;\n  enabled: boolean;\n  user?: `0x${string}`;\n} & CommonActionOptions): Promise<HyperliquidExchangeResponse<unknown>> {\n  const env = options.environment ?? \"mainnet\";\n  if (!options.wallet?.account || !options.wallet.walletClient) {\n    throw new Error(\n      \"Wallet with signing capability is required for portfolio margin.\"\n    );\n  }\n\n  const nonce =\n    options.nonce ??\n    options.walletNonceProvider?.() ??\n    options.wallet.nonceSource?.() ??\n    options.nonceSource?.() ??\n    Date.now();\n\n  const signatureChainId = getSignatureChainId(env);\n  const hyperliquidChain = HL_CHAIN_LABEL[env];\n  const user = normalizeAddress(\n    options.user ?? (options.wallet.address as `0x${string}`)\n  );\n\n  const action: HyperliquidUserPortfolioMarginAction = {\n    type: \"userPortfolioMargin\",\n    enabled: Boolean(options.enabled),\n    hyperliquidChain,\n    signatureChainId,\n    user,\n    nonce,\n  };\n\n  const signature: ExchangeSignature = await signUserPortfolioMargin({\n    wallet: options.wallet,\n    action,\n  });\n\n  const body: {\n    action: typeof action;\n    nonce: number;\n    signature: ExchangeSignature;\n    vaultAddress?: `0x${string}`;\n    expiresAfter?: number;\n  } = {\n    action,\n    nonce,\n    signature,\n  };\n\n  if (options.vaultAddress) {\n    body.vaultAddress = normalizeAddress(options.vaultAddress);\n  }\n  if (typeof options.expiresAfter === \"number\") {\n    body.expiresAfter = options.expiresAfter;\n  }\n\n  return postExchange(env, body);\n}\n\nexport async function setHyperliquidDexAbstraction(options: {\n  wallet: WalletFullContext;\n  enabled: boolean;\n  user?: `0x${string}`;\n} & CommonActionOptions): Promise<HyperliquidExchangeResponse<unknown>> {\n  const env = options.environment ?? \"mainnet\";\n  if (!options.wallet?.account || !options.wallet.walletClient) {\n    throw new Error(\n      \"Wallet with signing capability is required for dex abstraction.\"\n    );\n  }\n\n  const nonce =\n    options.nonce ??\n    options.walletNonceProvider?.() ??\n    options.wallet.nonceSource?.() ??\n    options.nonceSource?.() ??\n    Date.now();\n\n  const signatureChainId = getSignatureChainId(env);\n  const hyperliquidChain = HL_CHAIN_LABEL[env];\n  const user = normalizeAddress(\n    options.user ?? (options.wallet.address as `0x${string}`)\n  );\n\n  const action: HyperliquidUserDexAbstractionAction = {\n    type: \"userDexAbstraction\",\n    enabled: Boolean(options.enabled),\n    hyperliquidChain,\n    signatureChainId,\n    user,\n    nonce,\n  };\n\n  const signature: ExchangeSignature = await signUserDexAbstraction({\n    wallet: options.wallet,\n    action,\n  });\n\n  const body: {\n    action: typeof action;\n    nonce: number;\n    signature: ExchangeSignature;\n    vaultAddress?: `0x${string}`;\n    expiresAfter?: number;\n  } = {\n    action,\n    nonce,\n    signature,\n  };\n\n  if (options.vaultAddress) {\n    body.vaultAddress = normalizeAddress(options.vaultAddress);\n  }\n  if (typeof options.expiresAfter === \"number\") {\n    body.expiresAfter = options.expiresAfter;\n  }\n\n  return postExchange(env, body);\n}\n\nexport async function setHyperliquidAccountAbstractionMode(options: {\n  wallet: WalletFullContext;\n  mode: HyperliquidAccountMode;\n  user?: `0x${string}`;\n} & CommonActionOptions): Promise<HyperliquidExchangeResponse<unknown>> {\n  const env = options.environment ?? \"mainnet\";\n  if (!options.wallet?.account || !options.wallet.walletClient) {\n    throw new Error(\n      \"Wallet with signing capability is required for account abstraction mode.\"\n    );\n  }\n\n  const nonce =\n    options.nonce ??\n    options.walletNonceProvider?.() ??\n    options.wallet.nonceSource?.() ??\n    options.nonceSource?.() ??\n    Date.now();\n\n  const signatureChainId = getSignatureChainId(env);\n  const hyperliquidChain = HL_CHAIN_LABEL[env];\n  const user = normalizeAddress(\n    options.user ?? (options.wallet.address as `0x${string}`)\n  );\n\n  const abstraction: HyperliquidAbstraction =\n    resolveHyperliquidAbstractionFromMode(options.mode);\n\n  const action: HyperliquidUserSetAbstractionAction = {\n    type: \"userSetAbstraction\",\n    abstraction,\n    hyperliquidChain,\n    signatureChainId,\n    user,\n    nonce,\n  };\n\n  const signature: ExchangeSignature = await signUserSetAbstraction({\n    wallet: options.wallet,\n    action,\n  });\n\n  const body: {\n    action: typeof action;\n    nonce: number;\n    signature: ExchangeSignature;\n    vaultAddress?: `0x${string}`;\n    expiresAfter?: number;\n  } = {\n    action,\n    nonce,\n    signature,\n  };\n\n  if (options.vaultAddress) {\n    body.vaultAddress = normalizeAddress(options.vaultAddress);\n  }\n  if (typeof options.expiresAfter === \"number\") {\n    body.expiresAfter = options.expiresAfter;\n  }\n\n  return postExchange(env, body);\n}\n\nexport async function cancelHyperliquidOrders(options: {\n  wallet: WalletFullContext;\n  cancels: CancelInput[];\n} & CommonActionOptions) {\n  options.cancels.forEach((c) => assertSymbol(c.symbol));\n  const action = {\n    type: \"cancel\",\n    cancels: await withAssetIndexes(options, options.cancels, (idx, entry) => ({\n      a: idx,\n      o: entry.oid,\n    })),\n  };\n  return submitExchangeAction(options, action);\n}\n\nexport async function cancelHyperliquidOrdersByCloid(options: {\n  wallet: WalletFullContext;\n  cancels: CancelByCloidInput[];\n} & CommonActionOptions) {\n  options.cancels.forEach((c) => assertSymbol(c.symbol));\n  const action = {\n    type: \"cancelByCloid\",\n    cancels: await withAssetIndexes(\n      options,\n      options.cancels,\n      (idx, entry) => ({\n        asset: idx,\n        cloid: normalizeCloid(entry.cloid),\n      })\n    ),\n  };\n  return submitExchangeAction(options, action);\n}\n\nexport async function cancelAllHyperliquidOrders(options: {\n  wallet: WalletFullContext;\n} & CommonActionOptions) {\n  const action = { type: \"cancelAll\" };\n  return submitExchangeAction(options, action);\n}\n\nexport async function scheduleHyperliquidCancel(options: {\n  wallet: WalletFullContext;\n  time?: number | null;\n} & CommonActionOptions) {\n  if (options.time != null) {\n    assertPositiveNumber(options.time, \"time\");\n  }\n  const action =\n    options.time == null\n      ? { type: \"scheduleCancel\" }\n      : { type: \"scheduleCancel\", time: options.time };\n  return submitExchangeAction(options, action);\n}\n\nexport async function modifyHyperliquidOrder(options: {\n  wallet: WalletFullContext;\n  modification: ModifyOrderInput;\n  grouping?: HyperliquidGrouping;\n} & CommonActionOptions) {\n  const { modification } = options;\n  const order = await buildOrder(modification.order, options);\n  const action = {\n    type: \"modify\",\n    oid: modification.oid,\n    order,\n  };\n  return submitExchangeAction(options, action);\n}\n\nexport async function batchModifyHyperliquidOrders(options: {\n  wallet: WalletFullContext;\n  modifications: ModifyOrderInput[];\n} & CommonActionOptions) {\n  options.modifications.forEach((m) => assertSymbol(m.order.symbol));\n  const modifies = await Promise.all(\n    options.modifications.map(async (mod) => ({\n      oid: mod.oid,\n      order: await buildOrder(mod.order, options),\n    }))\n  );\n  const action = {\n    type: \"batchModify\",\n    modifies,\n  };\n  return submitExchangeAction(options, action);\n}\n\nexport async function placeHyperliquidTwapOrder(options: {\n  wallet: WalletFullContext;\n  twap: TwapOrderInput;\n} & CommonActionOptions) {\n  const { twap } = options;\n  assertSymbol(twap.symbol);\n  assertPositiveDecimal(twap.size, \"size\");\n  assertPositiveNumber(twap.minutes, \"minutes\");\n  const env = options.environment ?? \"mainnet\";\n  const asset = await resolveHyperliquidAssetIndex({\n    symbol: twap.symbol,\n    baseUrl: API_BASES[env],\n    environment: env,\n    fetcher: fetch,\n  });\n  const action = {\n    type: \"twapOrder\",\n    twap: {\n      a: asset,\n      b: twap.side === \"buy\",\n      s: toApiDecimal(twap.size),\n      r: Boolean(twap.reduceOnly),\n      m: twap.minutes,\n      t: Boolean(twap.randomize),\n    },\n  };\n  return submitExchangeAction(options, action);\n}\n\nexport async function cancelHyperliquidTwapOrder(options: {\n  wallet: WalletFullContext;\n  cancel: TwapCancelInput;\n} & CommonActionOptions) {\n  assertSymbol(options.cancel.symbol);\n  const env = options.environment ?? \"mainnet\";\n  const asset = await resolveHyperliquidAssetIndex({\n    symbol: options.cancel.symbol,\n    baseUrl: API_BASES[env],\n    environment: env,\n    fetcher: fetch,\n  });\n  const action = {\n    type: \"twapCancel\",\n    a: asset,\n    t: options.cancel.twapId,\n  };\n  return submitExchangeAction(options, action);\n}\n\nexport async function updateHyperliquidLeverage(options: {\n  wallet: WalletFullContext;\n  input: UpdateLeverageInput;\n} & CommonActionOptions) {\n  assertSymbol(options.input.symbol);\n  assertPositiveNumber(options.input.leverage, \"leverage\");\n  const env = options.environment ?? \"mainnet\";\n  const asset = await resolveHyperliquidAssetIndex({\n    symbol: options.input.symbol,\n    baseUrl: API_BASES[env],\n    environment: env,\n    fetcher: fetch,\n  });\n  const action = {\n    type: \"updateLeverage\",\n    asset,\n    isCross: options.input.leverageMode === \"cross\",\n    leverage: options.input.leverage,\n  };\n  return submitExchangeAction(options, action);\n}\n\nexport async function updateHyperliquidIsolatedMargin(options: {\n  wallet: WalletFullContext;\n  input: UpdateIsolatedMarginInput;\n} & CommonActionOptions) {\n  assertSymbol(options.input.symbol);\n  assertPositiveNumber(options.input.ntli, \"ntli\");\n  const env = options.environment ?? \"mainnet\";\n  const asset = await resolveHyperliquidAssetIndex({\n    symbol: options.input.symbol,\n    baseUrl: API_BASES[env],\n    environment: env,\n    fetcher: fetch,\n  });\n  const action = {\n    type: \"updateIsolatedMargin\",\n    asset,\n    isBuy: options.input.isBuy,\n    ntli: options.input.ntli,\n  };\n  return submitExchangeAction(options, action);\n}\n\nexport async function reserveHyperliquidRequestWeight(options: {\n  wallet: WalletFullContext;\n  weight: number;\n} & CommonActionOptions) {\n  assertPositiveNumber(options.weight, \"weight\");\n  const action = {\n    type: \"reserveRequestWeight\",\n    weight: options.weight,\n  };\n  return submitExchangeAction(options, action);\n}\n\nexport async function createHyperliquidSubAccount(options: {\n  wallet: WalletFullContext;\n  name: string;\n} & CommonActionOptions) {\n  assertString(options.name, \"name\");\n  const action = {\n    type: \"createSubAccount\",\n    name: options.name,\n  };\n  return submitExchangeAction(options, action);\n}\n\nexport async function transferHyperliquidSubAccount(options: {\n  wallet: WalletFullContext;\n  subAccountUser: `0x${string}`;\n  isDeposit: boolean;\n  usd: string | number | bigint;\n} & CommonActionOptions) {\n  assertString(options.subAccountUser, \"subAccountUser\");\n  const usdScaled = normalizeUsdToInt(options.usd);\n  const action = {\n    type: \"subAccountTransfer\",\n    subAccountUser: normalizeAddress(options.subAccountUser),\n    isDeposit: Boolean(options.isDeposit),\n    usd: usdScaled,\n  };\n  return submitExchangeAction(options, action);\n}\n\nexport async function sendHyperliquidSpot(options: {\n  wallet: WalletFullContext;\n  destination: `0x${string}`;\n  token: string;\n  amount: string | number | bigint;\n  environment?: HyperliquidEnvironment;\n  nonce?: number;\n  nonceSource?: NonceSource;\n}) {\n  const env = options.environment ?? \"mainnet\";\n  if (!options.wallet.account || !options.wallet.walletClient) {\n    throw new Error(\"Wallet with signing capability is required for spotSend.\");\n  }\n  assertString(options.token, \"token\");\n  assertPositiveDecimal(options.amount, \"amount\");\n  const signatureChainId = getSignatureChainId(env);\n  const hyperliquidChain = HL_CHAIN_LABEL[env];\n\n  const nonce =\n    options.nonce ?? options.nonceSource?.() ?? Date.now();\n  const time = BigInt(nonce);\n\n  const signature = await signSpotSend({\n    wallet: options.wallet,\n    hyperliquidChain,\n    signatureChainId,\n    destination: normalizeAddress(options.destination),\n    token: options.token,\n    amount: toApiDecimal(options.amount),\n    time,\n  });\n\n  const action = {\n    type: \"spotSend\",\n    hyperliquidChain,\n    signatureChainId,\n    destination: normalizeAddress(options.destination),\n    token: options.token,\n    amount: toApiDecimal(options.amount),\n    time: nonce,\n  };\n\n  return postExchange(env, { action, nonce, signature });\n}\n\nasync function submitExchangeAction(\n  options: { wallet: WalletFullContext } & CommonActionOptions,\n  action: Record<string, unknown> | ExchangeOrderAction\n): Promise<HyperliquidExchangeResponse<unknown>> {\n  if (!options.wallet?.account || !options.wallet.walletClient) {\n    throw new Error(\"Hyperliquid exchange actions require a signing wallet.\");\n  }\n\n  const env = options.environment ?? \"mainnet\";\n  const nonceSource =\n    options.walletNonceProvider ?? options.wallet.nonceSource ?? options.nonceSource;\n  if (!nonceSource && options.nonce === undefined) {\n    throw new Error(\"Wallet nonce source is required for Hyperliquid exchange actions.\");\n  }\n  const effectiveNonce = options.nonce ?? nonceSource?.();\n  if (effectiveNonce === undefined) {\n    throw new Error(\"Hyperliquid exchange actions require a nonce.\");\n  }\n\n  const signature: ExchangeSignature = await signL1Action({\n    wallet: options.wallet,\n    action,\n    nonce: effectiveNonce,\n    vaultAddress: options.vaultAddress\n      ? normalizeAddress(options.vaultAddress)\n      : undefined,\n    expiresAfter: options.expiresAfter,\n    isTestnet: env === \"testnet\",\n  });\n\n  const body: {\n    action: typeof action;\n    nonce: number;\n    signature: ExchangeSignature;\n    vaultAddress?: `0x${string}`;\n    expiresAfter?: number;\n  } = {\n    action,\n    nonce: effectiveNonce,\n    signature,\n  };\n\n  if (options.vaultAddress) {\n    body.vaultAddress = normalizeAddress(options.vaultAddress);\n  }\n  if (typeof options.expiresAfter === \"number\") {\n    body.expiresAfter = options.expiresAfter;\n  }\n\n  return postExchange(env, body);\n}\n\nasync function withAssetIndexes<TInput>(\n  options: { environment?: HyperliquidEnvironment },\n  entries: TInput[],\n  mapper: (assetIndex: number, entry: TInput) => Record<string, unknown>\n) {\n  const env = options.environment ?? \"mainnet\";\n  return Promise.all(\n    entries.map(async (entry: any) => {\n      const assetIndex = await resolveHyperliquidAssetIndex({\n        symbol: entry.symbol,\n        baseUrl: API_BASES[env],\n        environment: env,\n        fetcher: fetch,\n      });\n      return mapper(assetIndex, entry);\n    })\n  );\n}\n\nasync function buildOrder(\n  intent: HyperliquidOrderIntent,\n  options: { environment?: HyperliquidEnvironment }\n): Promise<ExchangeOrderAction[\"orders\"][number]> {\n  assertSymbol(intent.symbol);\n  assertPositiveDecimal(intent.price, \"price\");\n  assertPositiveDecimal(intent.size, \"size\");\n  const env = options.environment ?? \"mainnet\";\n  const assetIndex = await resolveHyperliquidAssetIndex({\n    symbol: intent.symbol,\n    baseUrl: API_BASES[env],\n    environment: env,\n    fetcher: fetch,\n  });\n\n  const limitOrTrigger = intent.trigger\n    ? mapTrigger(intent.trigger)\n    : {\n        limit: {\n          tif: intent.tif ?? \"Ioc\",\n        },\n      };\n\n  return {\n    a: assetIndex,\n    b: intent.side === \"buy\",\n    p: toApiDecimal(intent.price),\n    s: toApiDecimal(intent.size),\n    r: intent.reduceOnly ?? false,\n    t: limitOrTrigger,\n    ...(intent.clientId\n      ? {\n          c: normalizeCloid(intent.clientId),\n        }\n      : {}),\n  };\n}\n\nfunction mapTrigger(\n  trigger: HyperliquidTriggerOptions\n): ExchangeOrderAction[\"orders\"][number][\"t\"] {\n  assertPositiveDecimal(trigger.triggerPx, \"triggerPx\");\n  return {\n    trigger: {\n      isMarket: Boolean(trigger.isMarket),\n      triggerPx: toApiDecimal(trigger.triggerPx),\n      tpsl: trigger.tpsl,\n    },\n  };\n}\n\nfunction assertSymbol(value: string) {\n  assertString(value, \"symbol\");\n}\n\nfunction normalizeUsdToInt(value: string | number | bigint): number {\n  if (typeof value === \"bigint\") {\n    if (value < 0n) {\n      throw new Error(\"usd must be non-negative.\");\n    }\n    return Number(value);\n  }\n  const parsed = typeof value === \"string\" ? Number.parseFloat(value) : Number(value);\n  if (!Number.isFinite(parsed) || parsed < 0) {\n    throw new Error(\"usd must be a non-negative number.\");\n  }\n  return Math.round(parsed * 1_000_000);\n}\n\nfunction assertString(value: unknown, label: string) {\n  if (typeof value !== \"string\" || !value.trim()) {\n    throw new Error(`${label} must be a non-empty string.`);\n  }\n}\n\nfunction assertPositiveDecimal(\n  value: string | number | bigint,\n  label: string\n) {\n  if (typeof value === \"number\") {\n    assertPositiveNumber(value, label);\n    return;\n  }\n  if (typeof value === \"bigint\") {\n    if (value <= 0n) {\n      throw new Error(`${label} must be positive.`);\n    }\n    return;\n  }\n  assertString(value, label);\n  if (!/^(?:\\d+\\.?\\d*|\\.\\d+)$/.test(value.trim())) {\n    throw new Error(`${label} must be a positive decimal string.`);\n  }\n  const numeric = Number(value);\n  if (!Number.isFinite(numeric) || numeric <= 0) {\n    throw new Error(`${label} must be positive.`);\n  }\n}\n\nfunction collectExchangeErrorMessages(payload: unknown): string[] {\n  if (!payload || typeof payload !== \"object\") return [];\n  const root = payload as {\n    response?: {\n      data?: {\n        statuses?: unknown[];\n        status?: unknown;\n      };\n    };\n  };\n\n  const messages: string[] = [];\n  const statuses = root.response?.data?.statuses;\n  if (Array.isArray(statuses)) {\n    statuses.forEach((status, index) => {\n      if (\n        status &&\n        typeof status === \"object\" &&\n        \"error\" in status &&\n        typeof (status as { error?: unknown }).error === \"string\"\n      ) {\n        const errorText = (status as { error: string }).error;\n        messages.push(`status[${index}]: ${errorText}`);\n      }\n    });\n  }\n\n  const singleStatus = root.response?.data?.status;\n  if (\n    singleStatus &&\n    typeof singleStatus === \"object\" &&\n    \"error\" in singleStatus &&\n    typeof (singleStatus as { error?: unknown }).error === \"string\"\n  ) {\n    messages.push((singleStatus as { error: string }).error);\n  }\n\n  return messages;\n}\n\nasync function postExchange(\n  env: HyperliquidEnvironment,\n  body: Record<string, unknown>\n): Promise<HyperliquidExchangeResponse<unknown>> {\n  const response = await fetch(`${API_BASES[env]}/exchange`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify(body),\n  });\n\n  const text = await response.text().catch(() => \"\");\n  const json = (() => {\n    if (!text) return null;\n    try {\n      return JSON.parse(text) as HyperliquidExchangeResponse<unknown>;\n    } catch {\n      return null;\n    }\n  })();\n\n  if (!response.ok) {\n    throw new HyperliquidApiError(\"Hyperliquid exchange action failed.\", {\n      status: response.status,\n      statusText: response.statusText,\n      body: json ?? (text ? text : null),\n    });\n  }\n\n  if (!json) {\n    throw new HyperliquidApiError(\"Hyperliquid exchange action failed.\", {\n      status: response.status,\n      statusText: response.statusText,\n      body: text ? text : null,\n    });\n  }\n\n  if (json.status !== \"ok\") {\n    throw new HyperliquidApiError(\"Hyperliquid exchange returned error.\", {\n      status: response.status,\n      statusText: response.statusText,\n      body: json,\n    });\n  }\n\n  const nestedErrors = collectExchangeErrorMessages(json);\n  if (nestedErrors.length > 0) {\n    throw new HyperliquidApiError(\"Hyperliquid exchange returned action errors.\", {\n      status: response.status,\n      statusText: response.statusText,\n      body: json,\n      errors: nestedErrors,\n    });\n  }\n\n  return json;\n}\n","import type { HyperliquidEnvironment } from \"./base\";\n\nexport type HyperliquidChain = \"arbitrum\" | \"arbitrum-sepolia\";\nexport type HyperliquidStoreNetwork = \"hyperliquid\" | \"hyperliquid-testnet\";\n\nexport function resolveHyperliquidChain(\n  environment: HyperliquidEnvironment\n): HyperliquidChain {\n  return environment === \"mainnet\" ? \"arbitrum\" : \"arbitrum-sepolia\";\n}\n\nexport function resolveHyperliquidRpcEnvVar(\n  environment: HyperliquidEnvironment\n): \"ARBITRUM_RPC_URL\" | \"ARBITRUM_SEPOLIA_RPC_URL\" {\n  return environment === \"mainnet\"\n    ? \"ARBITRUM_RPC_URL\"\n    : \"ARBITRUM_SEPOLIA_RPC_URL\";\n}\n\nexport function resolveHyperliquidChainConfig(\n  environment: HyperliquidEnvironment,\n  env: Record<string, string | undefined> = process.env\n): { chain: HyperliquidChain; rpcUrl?: string } {\n  const rpcVar = resolveHyperliquidRpcEnvVar(environment);\n  const rpcUrl = env[rpcVar];\n  return {\n    chain: resolveHyperliquidChain(environment),\n    ...(rpcUrl ? { rpcUrl } : {}),\n  };\n}\n\nexport function resolveHyperliquidStoreNetwork(\n  environment: HyperliquidEnvironment\n): HyperliquidStoreNetwork {\n  return environment === \"mainnet\" ? \"hyperliquid\" : \"hyperliquid-testnet\";\n}\n","import type { HyperliquidEnvironment } from \"./base\";\n\nconst UNKNOWN_SYMBOL = \"UNKNOWN\";\n\nexport function extractHyperliquidDex(symbol: string): string | null {\n  const idx = symbol.indexOf(\":\");\n  if (idx <= 0) return null;\n  const dex = symbol.slice(0, idx).trim().toLowerCase();\n  return dex || null;\n}\n\nexport function normalizeSpotTokenName(value?: string | null): string {\n  const raw = (value ?? \"\").trim();\n  if (!raw) return \"\";\n  if (raw.endsWith(\"0\") && raw.length > 1) {\n    return raw.slice(0, -1);\n  }\n  return raw;\n}\n\nexport function normalizeHyperliquidBaseSymbol(\n  value?: string | null\n): string | null {\n  if (!value) return null;\n  const trimmed = value.trim();\n  if (!trimmed) return null;\n  const withoutDex = trimmed.includes(\":\")\n    ? trimmed.split(\":\").slice(1).join(\":\")\n    : trimmed;\n  const base = withoutDex.split(\"-\")[0] ?? withoutDex;\n  const baseNoPair = base.split(\"/\")[0] ?? base;\n  const normalized = baseNoPair.trim().toUpperCase();\n  if (!normalized || normalized === UNKNOWN_SYMBOL) return null;\n  return normalized;\n}\n\nexport function normalizeHyperliquidMetaSymbol(symbol: string): string {\n  const trimmed = symbol.trim();\n  const noDex = trimmed.includes(\":\")\n    ? trimmed.split(\":\").slice(1).join(\":\")\n    : trimmed;\n  const noPair = noDex.split(\"-\")[0] ?? noDex;\n  return (noPair.split(\"/\")[0] ?? noPair).trim();\n}\n\nexport function resolveHyperliquidPair(value?: string | null): string | null {\n  if (!value) return null;\n  const trimmed = value.trim();\n  if (!trimmed) return null;\n  const withoutDex = trimmed.includes(\":\")\n    ? trimmed.split(\":\").slice(1).join(\":\")\n    : trimmed;\n  if (withoutDex.includes(\"/\")) {\n    return withoutDex.toUpperCase();\n  }\n  if (withoutDex.includes(\"-\")) {\n    const [base, ...rest] = withoutDex.split(\"-\");\n    const quote = rest.join(\"-\").trim();\n    if (!base || !quote) return null;\n    return `${base.toUpperCase()}/${quote.toUpperCase()}`;\n  }\n  return null;\n}\n\nexport type HyperliquidProfileChain = \"hyperliquid\" | \"hyperliquid-testnet\";\n\nexport type HyperliquidProfileAssetInput = {\n  assetSymbols: string[];\n  pair?: string | null;\n  leverage?: number | null;\n  walletAddress?: string | null;\n};\n\nexport type HyperliquidProfileAsset = {\n  venue: \"hyperliquid\";\n  chain: HyperliquidProfileChain;\n  assetSymbols: string[];\n  pair?: string;\n  leverage?: number;\n  walletAddress?: string;\n};\n\nexport function resolveHyperliquidProfileChain(\n  environment: HyperliquidEnvironment\n): HyperliquidProfileChain {\n  return environment === \"testnet\" ? \"hyperliquid-testnet\" : \"hyperliquid\";\n}\n\nexport function buildHyperliquidProfileAssets(params: {\n  environment: HyperliquidEnvironment;\n  assets: HyperliquidProfileAssetInput[];\n}): HyperliquidProfileAsset[] {\n  const chain = resolveHyperliquidProfileChain(params.environment);\n\n  return params.assets\n    .map((asset) => {\n      const symbols = asset.assetSymbols\n        .map((symbol) => normalizeHyperliquidBaseSymbol(symbol))\n        .filter((symbol): symbol is string => Boolean(symbol));\n      if (symbols.length === 0) return null;\n\n      const explicitPair =\n        typeof asset.pair === \"string\" ? resolveHyperliquidPair(asset.pair) : null;\n      const derivedPair =\n        symbols.length === 1\n          ? resolveHyperliquidPair(asset.assetSymbols[0] ?? symbols[0])\n          : null;\n      const pair = explicitPair ?? derivedPair ?? undefined;\n      const leverage =\n        typeof asset.leverage === \"number\" && Number.isFinite(asset.leverage) && asset.leverage > 0\n          ? asset.leverage\n          : undefined;\n      const walletAddress =\n        typeof asset.walletAddress === \"string\" && asset.walletAddress.trim().length > 0\n          ? asset.walletAddress.trim()\n          : undefined;\n\n      return {\n        venue: \"hyperliquid\" as const,\n        chain,\n        assetSymbols: symbols,\n        ...(pair ? { pair } : {}),\n        ...(leverage ? { leverage } : {}),\n        ...(walletAddress ? { walletAddress } : {}),\n      };\n    })\n    .filter((asset): asset is HyperliquidProfileAsset => asset !== null);\n}\n\nexport function parseSpotPairSymbol(\n  symbol: string\n): { base: string; quote: string } | null {\n  const trimmed = symbol.trim();\n  if (!trimmed.includes(\"/\")) return null;\n  const [rawBase, rawQuote] = trimmed.split(\"/\");\n  const base = rawBase?.trim().toUpperCase() ?? \"\";\n  const quote = rawQuote?.trim().toUpperCase() ?? \"\";\n  if (!base || !quote) return null;\n  return { base, quote };\n}\n\nexport function isHyperliquidSpotSymbol(symbol: string): boolean {\n  return symbol.startsWith(\"@\") || symbol.includes(\"/\");\n}\n\nexport function resolveSpotMidCandidates(baseSymbol: string): string[] {\n  const base = baseSymbol.trim().toUpperCase();\n  if (!base) return [];\n  const candidates = [base];\n  if (base.startsWith(\"U\") && base.length > 1) {\n    candidates.push(base.slice(1));\n  }\n  return Array.from(new Set(candidates));\n}\n\nexport function resolveSpotTokenCandidates(value: string): string[] {\n  const normalized = normalizeSpotTokenName(value).toUpperCase();\n  if (!normalized) return [];\n  const candidates = [normalized];\n  if (normalized.startsWith(\"U\") && normalized.length > 1) {\n    candidates.push(normalized.slice(1));\n  }\n  return Array.from(new Set(candidates));\n}\n\nexport function resolveHyperliquidOrderSymbol(\n  value?: string | null\n): string | null {\n  if (!value) return null;\n  const trimmed = value.trim();\n  if (!trimmed) return null;\n  if (trimmed.startsWith(\"@\")) return trimmed;\n  if (trimmed.includes(\":\")) {\n    const [rawDex, ...restParts] = trimmed.split(\":\");\n    const dex = rawDex.trim().toLowerCase();\n    const rest = restParts.join(\":\");\n    const base = rest.split(\"/\")[0]?.split(\"-\")[0] ?? rest;\n    const normalizedBase = base.trim().toUpperCase();\n    if (!dex || !normalizedBase || normalizedBase === UNKNOWN_SYMBOL) {\n      return null;\n    }\n    return `${dex}:${normalizedBase}`;\n  }\n  const pair = resolveHyperliquidPair(trimmed);\n  if (pair) return pair;\n  return normalizeHyperliquidBaseSymbol(trimmed);\n}\n\nexport function resolveHyperliquidSymbol(\n  asset: string,\n  override?: string\n): string {\n  const raw =\n    override && override.trim().length > 0 ? override.trim() : asset.trim();\n  if (!raw) return raw;\n  if (raw.startsWith(\"@\")) return raw;\n  if (raw.includes(\":\")) {\n    const [dexRaw, ...restParts] = raw.split(\":\");\n    const dex = dexRaw.trim().toLowerCase();\n    const rest = restParts.join(\":\");\n    const base = rest.split(\"/\")[0]?.split(\"-\")[0] ?? rest;\n    const normalizedBase = base.trim().toUpperCase();\n    if (!dex) return normalizedBase;\n    return `${dex}:${normalizedBase}`;\n  }\n  if (raw.includes(\"/\")) {\n    return raw.toUpperCase();\n  }\n  if (raw.includes(\"-\")) {\n    const [base, ...rest] = raw.split(\"-\");\n    const quote = rest.join(\"-\").trim();\n    if (base && quote) {\n      return `${base.toUpperCase()}/${quote.toUpperCase()}`;\n    }\n  }\n  const base = raw.split(\"-\")[0] ?? raw;\n  const baseNoPair = base.split(\"/\")[0] ?? base;\n  return baseNoPair.trim().toUpperCase();\n}\n","import { HyperliquidApiError } from \"./base\";\n\nexport type HyperliquidTickSize = {\n  tickSizeInt: bigint;\n  tickDecimals: number;\n};\n\nexport type HyperliquidMarketType = \"perp\" | \"spot\";\n\ntype HyperliquidOrderResponseLike = {\n  response?: {\n    data?: {\n      statuses?: Array<Record<string, unknown>>;\n    };\n  };\n};\n\nconst MAX_HYPERLIQUID_PRICE_DECIMALS = 8;\n\nfunction countDecimals(value: number): number {\n  if (!Number.isFinite(value)) return 0;\n  const s = value.toString();\n  const [, dec = \"\"] = s.split(\".\");\n  return dec.length;\n}\n\nfunction clampPriceDecimals(value: number): string {\n  if (!Number.isFinite(value) || value <= 0) {\n    throw new Error(\"Price must be positive.\");\n  }\n  const fixed = value.toFixed(MAX_HYPERLIQUID_PRICE_DECIMALS);\n  return fixed.replace(/\\.?0+$/, \"\");\n}\n\nfunction assertNumberString(value: string): void {\n  if (!/^-?(?:\\d+\\.?\\d*|\\.\\d+)$/.test(value)) {\n    throw new TypeError(\"Invalid decimal number string.\");\n  }\n}\n\nfunction normalizeDecimalString(value: string): string {\n  return value\n    .trim()\n    .replace(/^(-?)0+(?=\\d)/, \"$1\")\n    .replace(/\\.0*$|(\\.\\d+?)0+$/, \"$1\")\n    .replace(/^(-?)\\./, \"$10.\")\n    .replace(/^-?$/, \"0\")\n    .replace(/^-0$/, \"0\");\n}\n\nconst StringMath = {\n  log10Floor(value: string): number {\n    const abs = value.startsWith(\"-\") ? value.slice(1) : value;\n    const num = Number(abs);\n    if (!Number.isFinite(num) || num === 0) return -Infinity;\n\n    const [intPart, fracPart = \"\"] = abs.split(\".\");\n    if (Number(intPart) !== 0) {\n      return intPart.replace(/^0+/, \"\").length - 1;\n    }\n    const leadingZeros = fracPart.match(/^0*/)?.[0]?.length ?? 0;\n    return -(leadingZeros + 1);\n  },\n  multiplyByPow10(value: string, exp: number): string {\n    if (!Number.isInteger(exp)) {\n      throw new RangeError(\"Exponent must be an integer.\");\n    }\n    if (exp === 0) return normalizeDecimalString(value);\n\n    const negative = value.startsWith(\"-\");\n    const abs = negative ? value.slice(1) : value;\n    const [intRaw, fracRaw = \"\"] = abs.split(\".\");\n    const intPart = intRaw || \"0\";\n    let output: string;\n\n    if (exp > 0) {\n      if (exp >= fracRaw.length) {\n        output = intPart + fracRaw + \"0\".repeat(exp - fracRaw.length);\n      } else {\n        output = `${intPart}${fracRaw.slice(0, exp)}.${fracRaw.slice(exp)}`;\n      }\n    } else {\n      const absExp = -exp;\n      if (absExp >= intPart.length) {\n        output = `0.${\"0\".repeat(absExp - intPart.length)}${intPart}${fracRaw}`;\n      } else {\n        output = `${intPart.slice(0, -absExp)}.${intPart.slice(-absExp)}${fracRaw}`;\n      }\n    }\n\n    return normalizeDecimalString((negative ? \"-\" : \"\") + output);\n  },\n  trunc(value: string): string {\n    const index = value.indexOf(\".\");\n    return index === -1 ? value : value.slice(0, index) || \"0\";\n  },\n  toPrecisionTruncate(value: string, precision: number): string {\n    if (!Number.isInteger(precision) || precision < 1) {\n      throw new RangeError(\"Precision must be a positive integer.\");\n    }\n    if (/^-?0+(\\.0*)?$/.test(value)) return \"0\";\n\n    const negative = value.startsWith(\"-\");\n    const abs = negative ? value.slice(1) : value;\n    const magnitude = StringMath.log10Floor(abs);\n    const shiftAmount = precision - magnitude - 1;\n    const shifted = StringMath.multiplyByPow10(abs, shiftAmount);\n    const truncated = StringMath.trunc(shifted);\n    const shiftedBack = StringMath.multiplyByPow10(truncated, -shiftAmount);\n    return normalizeDecimalString(negative ? `-${shiftedBack}` : shiftedBack);\n  },\n  toFixedTruncate(value: string, decimals: number): string {\n    if (!Number.isInteger(decimals) || decimals < 0) {\n      throw new RangeError(\"Decimals must be a non-negative integer.\");\n    }\n    const matcher = new RegExp(`^-?(?:\\\\d+)?(?:\\\\.\\\\d{0,${decimals}})?`);\n    const result = value.match(matcher)?.[0];\n    if (!result) {\n      throw new TypeError(\"Invalid number format.\");\n    }\n    return normalizeDecimalString(result);\n  },\n};\n\nexport function formatHyperliquidPrice(\n  price: string | number,\n  szDecimals: number,\n  marketType: HyperliquidMarketType = \"perp\"\n): string {\n  const normalized = price.toString().trim();\n  assertNumberString(normalized);\n  if (/^-?\\d+$/.test(normalized)) {\n    return normalizeDecimalString(normalized);\n  }\n\n  const maxDecimals = Math.max((marketType === \"perp\" ? 6 : 8) - szDecimals, 0);\n  const decimalsTrimmed = StringMath.toFixedTruncate(normalized, maxDecimals);\n  const sigFigTrimmed = StringMath.toPrecisionTruncate(decimalsTrimmed, 5);\n  if (sigFigTrimmed === \"0\") {\n    throw new RangeError(\"Price is too small and was truncated to 0.\");\n  }\n  return sigFigTrimmed;\n}\n\nexport function formatHyperliquidSize(\n  size: string | number,\n  szDecimals: number\n): string {\n  const normalized = size.toString().trim();\n  assertNumberString(normalized);\n  const truncated = StringMath.toFixedTruncate(normalized, szDecimals);\n  if (truncated === \"0\") {\n    throw new RangeError(\"Size is too small and was truncated to 0.\");\n  }\n  return truncated;\n}\n\nexport function formatHyperliquidOrderSize(\n  value: number,\n  szDecimals: number\n): string {\n  if (!Number.isFinite(value) || value <= 0) return \"0\";\n  try {\n    return formatHyperliquidSize(value, szDecimals);\n  } catch {\n    return \"0\";\n  }\n}\n\nexport function roundHyperliquidPriceToTick(\n  price: number,\n  tick: HyperliquidTickSize,\n  side: \"buy\" | \"sell\"\n): string {\n  if (!Number.isFinite(price) || price <= 0) {\n    throw new Error(\"Price must be positive.\");\n  }\n  if (!Number.isFinite(tick.tickDecimals) || tick.tickDecimals < 0) {\n    throw new Error(\"tick.tickDecimals must be a non-negative number.\");\n  }\n  if (tick.tickSizeInt <= 0n) {\n    throw new Error(\"tick.tickSizeInt must be positive.\");\n  }\n\n  const scale = 10 ** tick.tickDecimals;\n  const scaled = BigInt(Math.round(price * scale));\n  const tickSize = tick.tickSizeInt;\n  const rounded =\n    side === \"sell\"\n      ? (scaled / tickSize) * tickSize\n      : ((scaled + tickSize - 1n) / tickSize) * tickSize;\n  const integer = Number(rounded) / scale;\n  return clampPriceDecimals(integer);\n}\n\nexport function formatHyperliquidMarketablePrice(params: {\n  mid: number;\n  side: \"buy\" | \"sell\";\n  slippageBps: number;\n  tick?: HyperliquidTickSize | null;\n}): string {\n  const { mid, side, slippageBps, tick } = params;\n  const decimals = countDecimals(mid);\n  const factor = 10 ** decimals;\n  const adjusted =\n    mid * (side === \"buy\" ? 1 + slippageBps / 10_000 : 1 - slippageBps / 10_000);\n\n  if (tick) {\n    return roundHyperliquidPriceToTick(adjusted, tick, side);\n  }\n\n  const scaled = adjusted * factor;\n  const rounded =\n    side === \"buy\" ? Math.ceil(scaled) / factor : Math.floor(scaled) / factor;\n  return clampPriceDecimals(rounded);\n}\n\nexport function extractHyperliquidOrderIds(\n  responses: HyperliquidOrderResponseLike[]\n): {\n  cloids: string[];\n  oids: string[];\n} {\n  const cloids = new Set<string>();\n  const oids = new Set<string>();\n  const push = (val: unknown, target: Set<string>) => {\n    if (val === null || val === undefined) return;\n    const str = String(val);\n    if (str.length) target.add(str);\n  };\n\n  for (const res of responses) {\n    const statuses = res?.response?.data?.statuses;\n    if (!Array.isArray(statuses)) continue;\n\n    for (const status of statuses) {\n      const resting = (status as any).resting as Record<string, unknown> | undefined;\n      const filled = (status as any).filled as Record<string, unknown> | undefined;\n      push(resting?.cloid, cloids);\n      push(resting?.oid, oids);\n      push(filled?.cloid, cloids);\n      push(filled?.oid, oids);\n    }\n  }\n\n  return {\n    cloids: Array.from(cloids),\n    oids: Array.from(oids),\n  };\n}\n\nexport function resolveHyperliquidOrderRef(params: {\n  response?: HyperliquidOrderResponseLike | null;\n  fallbackCloid?: string | null;\n  fallbackOid?: string | null;\n  prefix?: string;\n  index?: number;\n}): string {\n  const { response, fallbackCloid, fallbackOid, prefix = \"hl-order\", index = 0 } =\n    params;\n\n  const statuses = response?.response?.data?.statuses ?? [];\n  if (Array.isArray(statuses)) {\n    for (const status of statuses) {\n      const filled =\n        status && typeof (status as any).filled === \"object\"\n          ? ((status as any).filled as Record<string, unknown>)\n          : null;\n      if (filled) {\n        if (typeof filled.cloid === \"string\" && filled.cloid.trim().length > 0) {\n          return filled.cloid;\n        }\n        if (\n          typeof filled.oid === \"number\" ||\n          (typeof filled.oid === \"string\" && filled.oid.trim().length > 0)\n        ) {\n          return String(filled.oid);\n        }\n      }\n\n      const resting =\n        status && typeof (status as any).resting === \"object\"\n          ? ((status as any).resting as Record<string, unknown>)\n          : null;\n      if (resting) {\n        if (typeof resting.cloid === \"string\" && resting.cloid.trim().length > 0) {\n          return resting.cloid;\n        }\n        if (\n          typeof resting.oid === \"number\" ||\n          (typeof resting.oid === \"string\" && resting.oid.trim().length > 0)\n        ) {\n          return String(resting.oid);\n        }\n      }\n    }\n  }\n\n  if (fallbackCloid && fallbackCloid.trim().length > 0) {\n    return fallbackCloid;\n  }\n  if (fallbackOid && fallbackOid.trim().length > 0) {\n    return fallbackOid;\n  }\n  return `${prefix}-${Date.now()}-${index}`;\n}\n\nexport function resolveHyperliquidErrorDetail(error: unknown): unknown | null {\n  if (error instanceof HyperliquidApiError) {\n    return error.response ?? null;\n  }\n  if (error && typeof error === \"object\" && \"response\" in error) {\n    return (error as { response?: unknown }).response ?? null;\n  }\n  return null;\n}\n","function unwrapData(payload: unknown): Record<string, unknown> | null {\n  if (!payload || typeof payload !== \"object\") return null;\n  if (\"data\" in payload) {\n    const data = (payload as { data?: unknown }).data;\n    if (data && typeof data === \"object\") {\n      return data as Record<string, unknown>;\n    }\n  }\n  return payload as Record<string, unknown>;\n}\n\nexport function readHyperliquidNumber(value: unknown): number | null {\n  if (typeof value === \"number\" && Number.isFinite(value)) return value;\n  if (typeof value === \"string\" && value.trim().length > 0) {\n    const parsed = Number(value);\n    return Number.isFinite(parsed) ? parsed : null;\n  }\n  return null;\n}\n\nexport function readHyperliquidAccountValue(payload: unknown): number | null {\n  const data = unwrapData(payload);\n  if (!data) return null;\n  const candidates = [\n    (data as any)?.marginSummary?.accountValue,\n    (data as any)?.crossMarginSummary?.accountValue,\n    (data as any)?.accountValue,\n    (data as any)?.equity,\n    (data as any)?.totalAccountValue,\n    (data as any)?.marginSummary?.totalAccountValue,\n  ];\n  for (const value of candidates) {\n    const parsed = readHyperliquidNumber(value);\n    if (parsed !== null) return parsed;\n  }\n  return null;\n}\n\nfunction matchPerpCoin(params: {\n  coin: string;\n  target: string;\n  prefixMatch: boolean;\n}): boolean {\n  const coin = params.coin.toUpperCase();\n  const target = params.target.toUpperCase();\n  if (params.prefixMatch) return coin.startsWith(target);\n  return coin === target;\n}\n\nexport function readHyperliquidPerpPositionSize(\n  payload: unknown,\n  symbol: string,\n  options?: { prefixMatch?: boolean }\n): number {\n  const data = unwrapData(payload);\n  const rows = Array.isArray((data as any)?.assetPositions)\n    ? ((data as any).assetPositions as Array<Record<string, unknown>>)\n    : [];\n  const base = symbol.split(\"-\")[0]?.toUpperCase() ?? symbol.toUpperCase();\n  const prefixMatch = options?.prefixMatch ?? false;\n\n  for (const row of rows) {\n    const position = (row as any).position ?? row;\n    const coin =\n      typeof position?.coin === \"string\"\n        ? position.coin\n        : typeof (row as any).coin === \"string\"\n          ? (row as any).coin\n          : \"\";\n\n    if (!matchPerpCoin({ coin, target: base, prefixMatch })) continue;\n    const size = (position as any).szi ?? (row as any).szi;\n    const parsed = readHyperliquidNumber(size);\n    return parsed ?? 0;\n  }\n\n  return 0;\n}\n\nexport function readHyperliquidPerpPosition(\n  payload: unknown,\n  symbol: string,\n  options?: { prefixMatch?: boolean }\n): { size: number; positionValue: number; unrealizedPnl: number | null } {\n  const data = unwrapData(payload);\n  const rows = Array.isArray((data as any)?.assetPositions)\n    ? ((data as any).assetPositions as Array<Record<string, unknown>>)\n    : [];\n  const target = symbol.split(\"-\")[0]?.toUpperCase() ?? symbol.toUpperCase();\n  const prefixMatch = options?.prefixMatch ?? false;\n\n  for (const row of rows) {\n    const position = (row as any)?.position ?? row;\n    const coin =\n      typeof position?.coin === \"string\"\n        ? position.coin\n        : typeof (row as any)?.coin === \"string\"\n          ? (row as any).coin\n          : \"\";\n    if (!matchPerpCoin({ coin, target, prefixMatch })) continue;\n\n    const size = readHyperliquidNumber(position?.szi ?? (row as any).szi) ?? 0;\n    const positionValue = Math.abs(\n      readHyperliquidNumber(position?.positionValue ?? (row as any).positionValue) ??\n        0\n    );\n    const unrealizedPnl = readHyperliquidNumber(\n      position?.unrealizedPnl ?? (row as any).unrealizedPnl\n    );\n    return { size, positionValue, unrealizedPnl };\n  }\n\n  return { size: 0, positionValue: 0, unrealizedPnl: null };\n}\n\nexport function readHyperliquidSpotBalanceSize(\n  payload: unknown,\n  symbol: string\n): number {\n  const data = unwrapData(payload);\n  const rows = Array.isArray((data as any)?.balances)\n    ? ((data as any).balances as Array<Record<string, unknown>>)\n    : [];\n  const base =\n    symbol.split(\"/\")[0]?.split(\"-\")[0]?.toUpperCase() ?? symbol.toUpperCase();\n\n  for (const row of rows) {\n    const coin =\n      typeof row?.coin === \"string\"\n        ? row.coin\n        : typeof (row as any)?.asset === \"string\"\n          ? (row as any).asset\n          : \"\";\n    if (coin.toUpperCase() !== base) continue;\n\n    const total = (row as any).total ?? (row as any).balance ?? (row as any).szi;\n    const parsed = readHyperliquidNumber(total);\n    return parsed ?? 0;\n  }\n\n  return 0;\n}\n\nexport function readHyperliquidSpotBalance(\n  payload: unknown,\n  base: string\n): { total: number; entryNtl: number | null } {\n  const data = unwrapData(payload);\n  const balances = Array.isArray((data as any)?.balances)\n    ? ((data as any).balances as Array<Record<string, unknown>>)\n    : [];\n  const target = base.toUpperCase();\n\n  for (const row of balances) {\n    const coin = typeof row?.coin === \"string\" ? row.coin : \"\";\n    if (coin.toUpperCase() !== target) continue;\n    const total = readHyperliquidNumber(row?.total) ?? 0;\n    const entryNtl = readHyperliquidNumber(row?.entryNtl);\n    return { total, entryNtl };\n  }\n\n  return { total: 0, entryNtl: null };\n}\n\nexport function readHyperliquidSpotAccountValue(params: {\n  balances: unknown;\n  pricesUsd: Map<string, number>;\n}): number | null {\n  const rows = Array.isArray(params.balances)\n    ? (params.balances as Array<Record<string, unknown>>)\n    : [];\n  if (rows.length === 0) return null;\n\n  let total = 0;\n  let hasValue = false;\n\n  for (const row of rows) {\n    const coin =\n      typeof row?.coin === \"string\"\n        ? row.coin\n        : typeof (row as any)?.asset === \"string\"\n          ? (row as any).asset\n          : \"\";\n    if (!coin) continue;\n\n    const amount = readHyperliquidNumber(\n      (row as any).total ?? (row as any).balance ?? (row as any).szi\n    );\n    if (amount == null || amount === 0) continue;\n\n    const price = params.pricesUsd.get(coin.toUpperCase());\n    if (price == null || !Number.isFinite(price) || price <= 0) continue;\n\n    total += amount * price;\n    hasValue = true;\n  }\n\n  return hasValue ? total : null;\n}\n","import { API_BASES, type HyperliquidEnvironment } from \"./base\";\nimport {\n  fetchHyperliquidMeta,\n  fetchHyperliquidMetaAndAssetCtxs,\n  fetchHyperliquidSpotMeta,\n  fetchHyperliquidSpotMetaAndAssetCtxs,\n} from \"./info\";\nimport type { HyperliquidTickSize } from \"./order-utils\";\nimport {\n  isHyperliquidSpotSymbol,\n  normalizeHyperliquidMetaSymbol,\n  normalizeSpotTokenName,\n  parseSpotPairSymbol,\n  resolveSpotMidCandidates,\n  resolveSpotTokenCandidates,\n} from \"./symbols\";\nimport {\n  readHyperliquidNumber,\n  readHyperliquidSpotAccountValue,\n} from \"./state-readers\";\n\ntype PerpUniverseItem = {\n  name?: string;\n  szDecimals?: number;\n};\n\ntype PerpAssetContext = {\n  markPx?: string | number;\n  midPx?: string | number;\n  oraclePx?: string | number;\n  funding?: string | number;\n};\n\ntype SpotUniverseItem = {\n  name?: string;\n  index?: number;\n  tokens?: number[];\n};\n\ntype SpotToken = {\n  name?: string;\n  index?: number;\n  szDecimals?: number;\n};\n\ntype SpotAssetContext = {\n  markPx?: string | number;\n  midPx?: string | number;\n  oraclePx?: string | number;\n};\n\ntype SpotMetaResponse = {\n  universe?: SpotUniverseItem[];\n  tokens?: SpotToken[];\n};\n\nexport type HyperliquidPerpMarketInfo = {\n  symbol: string;\n  price: number;\n  fundingRate: number | null;\n  szDecimals: number;\n};\n\nexport type HyperliquidSpotMarketInfo = {\n  symbol: string;\n  base: string;\n  quote: string;\n  assetId: number;\n  marketIndex: number;\n  price: number;\n  szDecimals: number;\n};\n\nconst META_CACHE_TTL_MS = 5 * 60 * 1000;\nconst allMidsCache = new Map<\n  string,\n  { fetchedAt: number; mids: Record<string, string | number> }\n>();\n\nfunction gcd(a: bigint, b: bigint): bigint {\n  let left = a < 0n ? -a : a;\n  let right = b < 0n ? -b : b;\n  while (right !== 0n) {\n    const next = left % right;\n    left = right;\n    right = next;\n  }\n  return left;\n}\n\nfunction pow10(decimals: number): bigint {\n  let result = 1n;\n  for (let i = 0; i < decimals; i += 1) {\n    result *= 10n;\n  }\n  return result;\n}\n\nfunction maxDecimals(values: string[]): number {\n  let max = 0;\n  for (const value of values) {\n    const dot = value.indexOf(\".\");\n    if (dot === -1) continue;\n    const decimals = value.length - dot - 1;\n    if (decimals > max) max = decimals;\n  }\n  return max;\n}\n\nfunction toScaledInt(value: string, decimals: number): bigint {\n  const trimmed = value.trim();\n  const negative = trimmed.startsWith(\"-\");\n  const unsigned = negative ? trimmed.slice(1) : trimmed;\n  const [intPart, fracPart = \"\"] = unsigned.split(\".\");\n  const padded = fracPart.padEnd(decimals, \"0\").slice(0, decimals);\n  const combined = `${intPart || \"0\"}${padded}`;\n  const asInt = BigInt(combined || \"0\");\n  return negative ? -asInt : asInt;\n}\n\nfunction formatScaledInt(value: bigint, decimals: number): string {\n  const negative = value < 0n;\n  const absValue = negative ? -value : value;\n  const scale = pow10(decimals);\n  const integer = absValue / scale;\n  const fraction = absValue % scale;\n  if (decimals === 0) {\n    return `${negative ? \"-\" : \"\"}${integer.toString()}`;\n  }\n  const fractionStr = fraction.toString().padStart(decimals, \"0\");\n  return `${negative ? \"-\" : \"\"}${integer.toString()}.${fractionStr}`.replace(\n    /\\.?0+$/,\n    \"\"\n  );\n}\n\nfunction resolveSpotSizeDecimals(meta: SpotMetaResponse, symbol: string): number {\n  const universe = meta.universe ?? [];\n  const tokens = meta.tokens ?? [];\n  if (!universe.length || !tokens.length) {\n    throw new Error(`Spot metadata unavailable for ${symbol}.`);\n  }\n\n  const tokenMap = new Map<number, { name: string; szDecimals: number }>();\n  for (const token of tokens) {\n    const index = token?.index;\n    const szDecimals =\n      typeof token?.szDecimals === \"number\" ? token.szDecimals : null;\n    if (typeof index !== \"number\" || szDecimals == null) continue;\n    tokenMap.set(index, {\n      name: normalizeSpotTokenName(token?.name),\n      szDecimals,\n    });\n  }\n\n  if (symbol.startsWith(\"@\")) {\n    const targetIndex = Number.parseInt(symbol.slice(1), 10);\n    if (!Number.isFinite(targetIndex)) {\n      throw new Error(`Invalid spot pair id: ${symbol}`);\n    }\n    for (let idx = 0; idx < universe.length; idx += 1) {\n      const market = universe[idx];\n      const marketIndex = typeof market?.index === \"number\" ? market.index : idx;\n      if (marketIndex !== targetIndex) continue;\n      const [baseIndex] = Array.isArray(market?.tokens) ? market.tokens : [];\n      const baseToken = tokenMap.get(baseIndex ?? -1);\n      if (!baseToken) break;\n      return baseToken.szDecimals;\n    }\n    throw new Error(`Unknown spot pair id: ${symbol}`);\n  }\n\n  const pair = parseSpotPairSymbol(symbol);\n  if (!pair) {\n    throw new Error(`Invalid spot symbol: ${symbol}`);\n  }\n  const normalizedBase = normalizeSpotTokenName(pair.base).toUpperCase();\n  const normalizedQuote = normalizeSpotTokenName(pair.quote).toUpperCase();\n\n  for (const market of universe) {\n    const [baseIndex, quoteIndex] = Array.isArray(market?.tokens)\n      ? market.tokens\n      : [];\n    const baseToken = tokenMap.get(baseIndex ?? -1);\n    const quoteToken = tokenMap.get(quoteIndex ?? -1);\n    if (!baseToken || !quoteToken) continue;\n    if (\n      baseToken.name.toUpperCase() === normalizedBase &&\n      quoteToken.name.toUpperCase() === normalizedQuote\n    ) {\n      return baseToken.szDecimals;\n    }\n  }\n\n  throw new Error(`No size decimals found for ${symbol}.`);\n}\n\nexport async function fetchHyperliquidAllMids(\n  environment: HyperliquidEnvironment\n): Promise<Record<string, string | number>> {\n  const cacheKey = environment;\n  const cached = allMidsCache.get(cacheKey);\n  if (cached && Date.now() - cached.fetchedAt < META_CACHE_TTL_MS) {\n    return cached.mids;\n  }\n\n  const baseUrl = API_BASES[environment];\n  const res = await fetch(`${baseUrl}/info`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({ type: \"allMids\" }),\n  });\n  const json = (await res.json().catch(() => null)) as\n    | Record<string, string | number>\n    | null;\n  if (!res.ok || !json || typeof json !== \"object\") {\n    throw new Error(`Failed to load Hyperliquid mid prices (${res.status}).`);\n  }\n\n  allMidsCache.set(cacheKey, { fetchedAt: Date.now(), mids: json });\n  return json;\n}\n\nexport async function fetchHyperliquidTickSize(params: {\n  environment: HyperliquidEnvironment;\n  symbol: string;\n}): Promise<HyperliquidTickSize> {\n  return fetchHyperliquidTickSizeForCoin(params.environment, params.symbol);\n}\n\nexport async function fetchHyperliquidSpotTickSize(params: {\n  environment: HyperliquidEnvironment;\n  marketIndex: number;\n}): Promise<HyperliquidTickSize> {\n  if (!Number.isFinite(params.marketIndex)) {\n    throw new Error(\"Hyperliquid spot market index is invalid.\");\n  }\n  return fetchHyperliquidTickSizeForCoin(\n    params.environment,\n    `@${params.marketIndex}`\n  );\n}\n\nasync function fetchHyperliquidTickSizeForCoin(\n  environment: HyperliquidEnvironment,\n  coin: string\n): Promise<HyperliquidTickSize> {\n  const base = API_BASES[environment];\n  const res = await fetch(`${base}/info`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({ type: \"l2Book\", coin }),\n  });\n  if (!res.ok) {\n    throw new Error(`Hyperliquid l2Book failed for ${coin}`);\n  }\n\n  const data = (await res.json().catch(() => null)) as\n    | { levels?: Array<Array<{ px?: string | number }>> }\n    | null;\n  const levels = Array.isArray(data?.levels) ? data?.levels ?? [] : [];\n  const prices = levels\n    .flatMap((side) =>\n      Array.isArray(side) ? side.map((entry) => String(entry?.px ?? \"\")) : []\n    )\n    .filter((px) => px.length > 0);\n\n  if (prices.length < 2) {\n    throw new Error(`Hyperliquid l2Book missing price levels for ${coin}`);\n  }\n\n  const decimals = maxDecimals(prices);\n  const scaled = prices.map((px) => toScaledInt(px, decimals));\n  const unique = Array.from(new Set(scaled.map((v) => v.toString())))\n    .map((v) => BigInt(v))\n    .sort((a, b) => (a < b ? -1 : a > b ? 1 : 0));\n\n  let tick = 0n;\n  for (let i = 1; i < unique.length; i += 1) {\n    const diff = unique[i] - unique[i - 1];\n    if (diff <= 0n) continue;\n    tick = tick === 0n ? diff : gcd(tick, diff);\n  }\n\n  if (tick === 0n) {\n    tick = 1n;\n  }\n\n  return { tickSizeInt: tick, tickDecimals: decimals };\n}\n\nexport async function fetchHyperliquidPerpMarketInfo(params: {\n  environment: HyperliquidEnvironment;\n  symbol: string;\n}): Promise<HyperliquidPerpMarketInfo> {\n  const data = (await fetchHyperliquidMetaAndAssetCtxs(params.environment)) as [\n    { universe?: PerpUniverseItem[] },\n    PerpAssetContext[],\n  ];\n\n  const universe = data?.[0]?.universe ?? [];\n  const contexts = data?.[1] ?? [];\n  const target = normalizeHyperliquidMetaSymbol(params.symbol).toUpperCase();\n\n  const idx = universe.findIndex(\n    (entry) =>\n      normalizeHyperliquidMetaSymbol(entry?.name ?? \"\").toUpperCase() === target\n  );\n  if (idx < 0) {\n    throw new Error(`Unknown Hyperliquid perp asset: ${params.symbol}`);\n  }\n\n  const ctx = contexts[idx] ?? null;\n  const price = readHyperliquidNumber(ctx?.markPx ?? ctx?.midPx ?? ctx?.oraclePx);\n  if (!price || price <= 0) {\n    throw new Error(`No perp price available for ${params.symbol}`);\n  }\n\n  const fundingRate = readHyperliquidNumber(ctx?.funding);\n  const szDecimals = readHyperliquidNumber(universe[idx]?.szDecimals);\n  if (szDecimals == null) {\n    throw new Error(`No size decimals available for ${params.symbol}`);\n  }\n\n  return {\n    symbol: params.symbol,\n    price,\n    fundingRate,\n    szDecimals,\n  };\n}\n\nexport async function fetchHyperliquidSpotMarketInfo(params: {\n  environment: HyperliquidEnvironment;\n  base: string;\n  quote: string;\n  mids?: Record<string, string | number> | null;\n}): Promise<HyperliquidSpotMarketInfo> {\n  const mids =\n    params.mids === undefined\n      ? await fetchHyperliquidAllMids(params.environment).catch(() => null)\n      : params.mids;\n\n  const data = (await fetchHyperliquidSpotMetaAndAssetCtxs(params.environment)) as [\n    { universe?: SpotUniverseItem[]; tokens?: SpotToken[] },\n    SpotAssetContext[],\n  ];\n\n  const universe = data?.[0]?.universe ?? [];\n  const tokens = data?.[0]?.tokens ?? [];\n  const contexts = data?.[1] ?? [];\n\n  const tokenMap = new Map<number, { name: string; szDecimals: number }>();\n  for (const token of tokens) {\n    const index = token?.index;\n    const szDecimals = readHyperliquidNumber(token?.szDecimals);\n    if (typeof index !== \"number\" || szDecimals == null) continue;\n    tokenMap.set(index, {\n      name: normalizeSpotTokenName(token?.name),\n      szDecimals,\n    });\n  }\n\n  const baseCandidates = resolveSpotTokenCandidates(params.base);\n  const quoteCandidates = resolveSpotTokenCandidates(params.quote);\n  const normalizedBase = normalizeSpotTokenName(params.base).toUpperCase();\n  const normalizedQuote = normalizeSpotTokenName(params.quote).toUpperCase();\n\n  for (let idx = 0; idx < universe.length; idx += 1) {\n    const market = universe[idx];\n    const [baseIndex, quoteIndex] = Array.isArray(market?.tokens)\n      ? market.tokens\n      : [];\n    const baseToken = tokenMap.get(baseIndex ?? -1);\n    const quoteToken = tokenMap.get(quoteIndex ?? -1);\n    if (!baseToken || !quoteToken) continue;\n\n    const marketBaseCandidates = resolveSpotTokenCandidates(baseToken.name);\n    const marketQuoteCandidates = resolveSpotTokenCandidates(quoteToken.name);\n    if (\n      baseCandidates.some((candidate) => marketBaseCandidates.includes(candidate)) &&\n      quoteCandidates.some((candidate) => marketQuoteCandidates.includes(candidate))\n    ) {\n      const contextIndex =\n        typeof market?.index === \"number\" ? market.index : idx;\n      const ctx =\n        (contextIndex >= 0 && contextIndex < contexts.length\n          ? contexts[contextIndex]\n          : null) ?? contexts[idx] ?? null;\n\n      let price: number | null = null;\n      if (mids) {\n        for (const candidate of resolveSpotMidCandidates(baseToken.name)) {\n          const mid = readHyperliquidNumber(mids[candidate]);\n          if (mid != null && mid > 0) {\n            price = mid;\n            break;\n          }\n        }\n      }\n      if (!price || price <= 0) {\n        price = readHyperliquidNumber(ctx?.markPx ?? ctx?.midPx ?? ctx?.oraclePx);\n      }\n      if (!price || price <= 0) {\n        throw new Error(\n          `No spot price available for ${normalizedBase}/${normalizedQuote}`\n        );\n      }\n\n      const marketIndex = typeof market?.index === \"number\" ? market.index : idx;\n      return {\n        symbol: `${baseToken.name.toUpperCase()}/${quoteToken.name.toUpperCase()}`,\n        base: baseToken.name.toUpperCase(),\n        quote: quoteToken.name.toUpperCase(),\n        assetId: 10000 + marketIndex,\n        marketIndex,\n        price,\n        szDecimals: baseToken.szDecimals,\n      };\n    }\n  }\n\n  throw new Error(`Unknown Hyperliquid spot market: ${normalizedBase}/${normalizedQuote}`);\n}\n\nexport async function fetchHyperliquidSizeDecimals(params: {\n  environment: HyperliquidEnvironment;\n  symbol: string;\n}): Promise<number> {\n  const { symbol, environment } = params;\n  if (isHyperliquidSpotSymbol(symbol)) {\n    const meta = (await fetchHyperliquidSpotMeta(environment)) as SpotMetaResponse;\n    return resolveSpotSizeDecimals(meta, symbol);\n  }\n\n  const meta = (await fetchHyperliquidMeta(environment)) as {\n    universe?: Array<{ name?: string; szDecimals?: number }>;\n  };\n  const universe = Array.isArray(meta?.universe) ? meta.universe : [];\n  const normalized = normalizeHyperliquidMetaSymbol(symbol).toUpperCase();\n  const match = universe.find(\n    (entry) =>\n      normalizeHyperliquidMetaSymbol(entry?.name ?? \"\").toUpperCase() === normalized\n  );\n  if (!match || typeof match.szDecimals !== \"number\") {\n    throw new Error(`No size decimals found for ${symbol}.`);\n  }\n  return match.szDecimals;\n}\n\nexport function buildHyperliquidSpotUsdPriceMap(params: {\n  meta: SpotMetaResponse;\n  ctxs: SpotAssetContext[];\n  mids?: Record<string, string | number> | null;\n}): Map<string, number> {\n  const universe = params.meta.universe ?? [];\n  const tokens = params.meta.tokens ?? [];\n\n  const tokenMap = new Map<number, string>();\n  for (const token of tokens) {\n    const index = token?.index;\n    if (typeof index !== \"number\") continue;\n    tokenMap.set(index, normalizeSpotTokenName(token?.name).toUpperCase());\n  }\n\n  const prices = new Map<string, number>();\n  prices.set(\"USDC\", 1);\n\n  for (let idx = 0; idx < universe.length; idx += 1) {\n    const market = universe[idx];\n    const [baseIndex, quoteIndex] = Array.isArray(market?.tokens)\n      ? market.tokens\n      : [];\n    const base = tokenMap.get(baseIndex ?? -1);\n    const quote = tokenMap.get(quoteIndex ?? -1);\n    if (!base || !quote) continue;\n    if (quote !== \"USDC\") continue;\n\n    const contextIndex =\n      typeof market?.index === \"number\" ? market.index : idx;\n    const ctx =\n      (contextIndex >= 0 && contextIndex < params.ctxs.length\n        ? params.ctxs[contextIndex]\n        : null) ?? params.ctxs[idx] ?? null;\n\n    let price: number | null = null;\n    if (params.mids) {\n      for (const candidate of resolveSpotMidCandidates(base)) {\n        const mid = readHyperliquidNumber(params.mids[candidate]);\n        if (mid != null && mid > 0) {\n          price = mid;\n          break;\n        }\n      }\n    }\n\n    if (!price || price <= 0) {\n      price = readHyperliquidNumber(ctx?.markPx ?? ctx?.midPx ?? ctx?.oraclePx);\n    }\n    if (!price || price <= 0) continue;\n\n    prices.set(base, price);\n  }\n\n  return prices;\n}\n\nexport async function fetchHyperliquidSpotUsdPriceMap(\n  environment: HyperliquidEnvironment\n): Promise<Map<string, number>> {\n  const [spotMetaAndCtxs, mids] = await Promise.all([\n    fetchHyperliquidSpotMetaAndAssetCtxs(environment),\n    fetchHyperliquidAllMids(environment).catch(() => null),\n  ]);\n\n  const [metaRaw, ctxsRaw] = spotMetaAndCtxs as [SpotMetaResponse, SpotAssetContext[]];\n  const meta = {\n    universe: Array.isArray(metaRaw?.universe) ? metaRaw.universe : [],\n    tokens: Array.isArray(metaRaw?.tokens) ? metaRaw.tokens : [],\n  } satisfies SpotMetaResponse;\n\n  const ctxs = Array.isArray(ctxsRaw) ? ctxsRaw : [];\n  return buildHyperliquidSpotUsdPriceMap({ meta, ctxs, mids });\n}\n\nexport async function fetchHyperliquidSpotAccountValue(params: {\n  environment: HyperliquidEnvironment;\n  balances: unknown;\n}): Promise<number | null> {\n  const pricesUsd = await fetchHyperliquidSpotUsdPriceMap(params.environment);\n  return readHyperliquidSpotAccountValue({\n    balances: params.balances,\n    pricesUsd,\n  });\n}\n\nexport const __hyperliquidMarketDataInternals = {\n  maxDecimals,\n  toScaledInt,\n  formatScaledInt,\n};\n","import { encodeFunctionData, erc20Abi, parseUnits } from \"viem\";\nimport type { WalletFullContext } from \"../../wallet/types\";\nimport { store, type StoreOptions } from \"../../store\";\nimport {\n  API_BASES,\n  BUILDER_CODE,\n  HL_CHAIN_LABEL,\n  HL_ENDPOINT,\n  HyperliquidApiError,\n  MIN_DEPOSIT_USDC,\n  ZERO_ADDRESS,\n  createL1ActionHash,\n  getBridgeAddress,\n  getSignatureChainId,\n  normalizeCloid,\n  getUsdcAddress,\n  normalizeAddress,\n  resolveHyperliquidAssetIndex,\n  signApproveBuilderFee,\n  signL1Action,\n  splitSignature,\n  toApiDecimal,\n} from \"./base\";\nimport type {\n  HyperliquidEnvironment,\n  HyperliquidGrouping,\n  HyperliquidOrderIntent,\n  ExchangeOrderAction,\n  ExchangeSignature,\n} from \"./base\";\nexport type {\n  HyperliquidEnvironment as HyperliquidEnvironment,\n  HyperliquidTimeInForce as HyperliquidTimeInForce,\n  HyperliquidGrouping as HyperliquidGrouping,\n  HyperliquidTriggerType as HyperliquidTriggerType,\n  HyperliquidTriggerOptions as HyperliquidTriggerOptions,\n  HyperliquidOrderIntent as HyperliquidOrderIntent,\n  HyperliquidAbstraction as HyperliquidAbstraction,\n  HyperliquidAccountMode as HyperliquidAccountMode,\n  HyperliquidBuilderFee as HyperliquidBuilderFee,\n  MarketIdentity as MarketIdentity,\n  HyperliquidMarketIdentityInput as HyperliquidMarketIdentityInput,\n  NonceSource,\n  HyperliquidExchangeResponse,\n} from \"./base\";\nexport {\n  HyperliquidApiError,\n  HyperliquidGuardError,\n  HyperliquidTermsError,\n  HyperliquidBuilderApprovalError,\n  createMonotonicNonceFactory,\n  DEFAULT_HYPERLIQUID_MARKET_SLIPPAGE_BPS,\n  computeHyperliquidMarketIocLimitPrice,\n  resolveHyperliquidAbstractionFromMode,\n  buildHyperliquidMarketIdentity,\n} from \"./base\";\nexport {\n  fetchHyperliquidMeta,\n  fetchHyperliquidMetaAndAssetCtxs,\n  fetchHyperliquidSpotMeta,\n  fetchHyperliquidSpotMetaAndAssetCtxs,\n  fetchHyperliquidAssetCtxs,\n  fetchHyperliquidSpotAssetCtxs,\n  fetchHyperliquidOpenOrders,\n  fetchHyperliquidFrontendOpenOrders,\n  fetchHyperliquidOrderStatus,\n  fetchHyperliquidHistoricalOrders,\n  fetchHyperliquidUserFills,\n  fetchHyperliquidUserFillsByTime,\n  fetchHyperliquidUserRateLimit,\n  fetchHyperliquidPreTransferCheck,\n  fetchHyperliquidSpotClearinghouseState,\n  HyperliquidInfoClient,\n} from \"./info\";\n\nexport interface HyperliquidOrderOptions {\n  wallet: WalletFullContext;\n  orders: HyperliquidOrderIntent[];\n  grouping?: HyperliquidGrouping;\n  environment?: HyperliquidEnvironment;\n  vaultAddress?: `0x${string}`;\n  expiresAfter?: number;\n  nonce?: number;\n}\n\nexport type HyperliquidOrderStatus =\n  | { resting: { oid: number; cloid?: `0x${string}` } }\n  | {\n      filled: {\n        totalSz: string;\n        avgPx: string;\n        oid: number;\n        cloid?: `0x${string}`;\n      };\n    }\n  | { error: string }\n  | \"waitingForFill\"\n  | \"waitingForTrigger\";\n\nexport interface HyperliquidOrderResponse {\n  status: \"ok\";\n  response: {\n    type: \"order\";\n    data: {\n      statuses: HyperliquidOrderStatus[];\n    };\n  };\n}\n\nexport interface HyperliquidDepositResult {\n  txHash: `0x${string}`;\n  amount: number;\n  amountUnits: string;\n  environment: HyperliquidEnvironment;\n  bridgeAddress: `0x${string}`;\n}\n\nexport interface HyperliquidWithdrawResult {\n  amount: number;\n  destination: `0x${string}`;\n  environment: HyperliquidEnvironment;\n  nonce: number;\n  status: string;\n}\n\nexport interface HyperliquidClearinghouseState {\n  ok: boolean;\n  data: Record<string, unknown> | null;\n}\n\nexport interface HyperliquidApproveBuilderFeeOptions {\n  environment: HyperliquidEnvironment;\n  wallet: WalletFullContext;\n  nonce?: number;\n  /** Override default signature chain id. */\n  signatureChainId?: string;\n}\n\nexport interface HyperliquidApproveBuilderFeeResponse {\n  status: string;\n  response?: unknown;\n  error?: string;\n}\n\nexport interface HyperliquidTermsRecordInput {\n  environment: HyperliquidEnvironment;\n  walletAddress: `0x${string}`;\n  storeOptions?: StoreOptions;\n}\n\nexport interface HyperliquidBuilderApprovalRecordInput {\n  environment: HyperliquidEnvironment;\n  walletAddress: `0x${string}`;\n  storeOptions?: StoreOptions;\n}\n\ntype ExchangeRequestBody = {\n  action: ExchangeOrderAction;\n  nonce: number;\n  signature: ExchangeSignature;\n  vaultAddress?: `0x${string}`;\n  expiresAfter?: number;\n};\n\nfunction assertPositiveDecimalInput(\n  value: string | number | bigint,\n  label: string\n): void {\n  if (typeof value === \"number\") {\n    if (!Number.isFinite(value) || value <= 0) {\n      throw new Error(`${label} must be a positive number.`);\n    }\n    return;\n  }\n  if (typeof value === \"bigint\") {\n    if (value <= 0n) {\n      throw new Error(`${label} must be positive.`);\n    }\n    return;\n  }\n\n  const trimmed = value.trim();\n  if (!trimmed.length) {\n    throw new Error(`${label} must be a non-empty string.`);\n  }\n  if (!/^(?:\\d+\\.?\\d*|\\.\\d+)$/.test(trimmed)) {\n    throw new Error(`${label} must be a positive decimal string.`);\n  }\n  const numeric = Number(trimmed);\n  if (!Number.isFinite(numeric) || numeric <= 0) {\n    throw new Error(`${label} must be positive.`);\n  }\n}\n\nfunction normalizePositiveDecimalString(\n  raw: string,\n  label: string\n): string {\n  const trimmed = raw.trim();\n  if (!trimmed.length) {\n    throw new Error(`${label} must be a non-empty decimal string.`);\n  }\n  if (!/^(?:\\d+\\.?\\d*|\\.\\d+)$/.test(trimmed)) {\n    throw new Error(`${label} must be a positive decimal string.`);\n  }\n  const normalized = trimmed\n    .replace(/^0+(?=\\d)/, \"\")\n    .replace(/(\\.\\d*?)0+$/, \"$1\")\n    .replace(/\\.$/, \"\");\n  const numeric = Number(normalized);\n  if (!Number.isFinite(numeric) || numeric <= 0) {\n    throw new Error(`${label} must be positive.`);\n  }\n  return normalized;\n}\n\n/**\n * Sign and submit one or more orders to the Hyperliquid exchange endpoint.\n */\nexport async function placeHyperliquidOrder(\n  options: HyperliquidOrderOptions\n): Promise<HyperliquidOrderResponse> {\n  const {\n    wallet,\n    orders,\n    grouping = \"na\",\n    environment,\n    vaultAddress,\n    expiresAfter,\n    nonce,\n  } = options;\n\n  const effectiveBuilder = BUILDER_CODE;\n\n  if (!wallet?.account || !wallet.walletClient) {\n    throw new Error(\n      \"Hyperliquid order signing requires a wallet with signing capabilities.\"\n    );\n  }\n\n  if (!orders.length) {\n    throw new Error(\"At least one order is required.\");\n  }\n\n  const inferredEnvironment = environment ?? \"mainnet\";\n  const resolvedBaseUrl = API_BASES[inferredEnvironment];\n  const preparedOrders = await Promise.all(\n    orders.map(async (intent) => {\n      assertPositiveDecimalInput(intent.price, \"price\");\n      assertPositiveDecimalInput(intent.size, \"size\");\n      if (intent.trigger) {\n        assertPositiveDecimalInput(intent.trigger.triggerPx, \"triggerPx\");\n      }\n      const assetIndex = await resolveHyperliquidAssetIndex({\n        symbol: intent.symbol,\n        baseUrl: resolvedBaseUrl,\n        environment: inferredEnvironment,\n        fetcher: fetch,\n      });\n\n      const limitOrTrigger = intent.trigger\n        ? {\n            trigger: {\n              isMarket: Boolean(intent.trigger.isMarket),\n              triggerPx: toApiDecimal(intent.trigger.triggerPx),\n              tpsl: intent.trigger.tpsl,\n            },\n          }\n        : {\n            limit: {\n              tif: intent.tif ?? \"Ioc\",\n            },\n          };\n\n      const order: ExchangeOrderAction[\"orders\"][number] = {\n        a: assetIndex,\n        b: intent.side === \"buy\",\n        p: toApiDecimal(intent.price),\n        s: toApiDecimal(intent.size),\n        r: intent.reduceOnly ?? false,\n        t: limitOrTrigger,\n        ...(intent.clientId\n          ? {\n              c: normalizeCloid(intent.clientId),\n            }\n          : {}),\n      };\n\n      return order;\n    })\n  );\n\n  const action: ExchangeOrderAction = {\n    type: \"order\",\n    orders: preparedOrders,\n    grouping,\n  };\n\n  if (effectiveBuilder) {\n    action.builder = {\n      b: normalizeAddress(effectiveBuilder.address),\n      f: effectiveBuilder.fee,\n    };\n  }\n\n  const effectiveNonce = nonce ?? Date.now();\n  const signature = await signL1Action({\n    wallet,\n    action,\n    nonce: effectiveNonce,\n    ...(vaultAddress ? { vaultAddress } : {}),\n    ...(typeof expiresAfter === \"number\" ? { expiresAfter } : {}),\n    isTestnet: inferredEnvironment === \"testnet\",\n  });\n\n  const body: ExchangeRequestBody = {\n    action,\n    nonce: effectiveNonce,\n    signature,\n  };\n\n  if (vaultAddress) {\n    body.vaultAddress = normalizeAddress(vaultAddress);\n  }\n\n  if (typeof expiresAfter === \"number\") {\n    body.expiresAfter = expiresAfter;\n  }\n\n  const response = await fetch(`${resolvedBaseUrl}/exchange`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify(body),\n  });\n\n  const rawText = await response.text().catch(() => null);\n  let parsed: HyperliquidOrderResponse | { error?: string; message?: string } | string | null = null;\n  if (rawText && rawText.length) {\n    try {\n      parsed = JSON.parse(rawText) as\n        | HyperliquidOrderResponse\n        | { error?: string; message?: string }\n        | null;\n    } catch {\n      parsed = rawText;\n    }\n  }\n  const json =\n    parsed && typeof parsed === \"object\" && \"status\" in parsed\n      ? (parsed as HyperliquidOrderResponse)\n      : null;\n\n  if (!response.ok || !json) {\n    const detail =\n      (parsed as { error?: string; message?: string } | null)?.error ??\n      (parsed as { error?: string; message?: string } | null)?.message ??\n      (typeof parsed === \"string\" ? parsed : rawText);\n    const suffix = detail ? ` Detail: ${detail}` : \"\";\n    throw new HyperliquidApiError(\n      `Failed to submit Hyperliquid order.${suffix}`,\n      parsed ?? rawText ?? { status: response.status }\n    );\n  }\n\n  if (json.status !== \"ok\") {\n    const detail = (parsed as { error?: string } | null)?.error ?? rawText;\n    throw new HyperliquidApiError(\n      detail\n        ? `Hyperliquid API returned an error status: ${detail}`\n        : \"Hyperliquid API returned an error status.\",\n      json\n    );\n  }\n\n  const statuses = json.response?.data?.statuses ?? [];\n  const errorStatuses = statuses.filter(\n    (entry): entry is { error: string } =>\n      Boolean(\n        entry &&\n          typeof entry === \"object\" &&\n          \"error\" in entry &&\n          typeof (entry as { error?: unknown }).error === \"string\"\n      )\n  );\n  if (errorStatuses.length) {\n    const message = errorStatuses.map((entry) => entry.error).join(\", \");\n    throw new HyperliquidApiError(\n      message || \"Hyperliquid rejected the order.\",\n      json\n    );\n  }\n\n  return json;\n}\n\nexport async function depositToHyperliquidBridge(options: {\n  environment: HyperliquidEnvironment;\n  amount: string;\n  wallet: WalletFullContext;\n}): Promise<HyperliquidDepositResult> {\n  const { environment, amount, wallet } = options;\n\n  const parsedAmount = Number(amount);\n  if (!Number.isFinite(parsedAmount) || parsedAmount <= 0) {\n    throw new Error(\"Deposit amount must be a positive number.\");\n  }\n  if (parsedAmount < MIN_DEPOSIT_USDC) {\n    throw new Error(`Minimum deposit is ${MIN_DEPOSIT_USDC} USDC.`);\n  }\n\n  if (!wallet.account || !wallet.walletClient) {\n    throw new Error(\"Wallet with signing capability is required for deposit.\");\n  }\n\n  const bridgeAddress = getBridgeAddress(environment);\n  const usdcAddress = getUsdcAddress(environment);\n  const amountUnits = parseUnits(amount, 6);\n\n  if (!wallet.walletClient || !wallet.publicClient) {\n    throw new Error(\n      \"Wallet client and public client are required for deposit.\"\n    );\n  }\n\n  const walletClient = wallet.walletClient;\n  const publicClient = wallet.publicClient;\n\n  const data = encodeFunctionData({\n    abi: erc20Abi,\n    functionName: \"transfer\",\n    args: [bridgeAddress, amountUnits],\n  });\n\n  const txHash = await walletClient.sendTransaction({\n    account: wallet.account,\n    to: usdcAddress,\n    data,\n  });\n\n  await publicClient.waitForTransactionReceipt({ hash: txHash });\n\n  return {\n    txHash,\n    amount: parsedAmount,\n    amountUnits: amountUnits.toString(),\n    environment,\n    bridgeAddress,\n  };\n}\n\nexport async function withdrawFromHyperliquid(options: {\n  environment: HyperliquidEnvironment;\n  amount: string;\n  destination: `0x${string}`;\n  wallet: WalletFullContext;\n}): Promise<HyperliquidWithdrawResult> {\n  const { environment, amount, destination, wallet } = options;\n\n  const normalizedAmount = normalizePositiveDecimalString(\n    amount,\n    \"Withdraw amount\"\n  );\n  const parsedAmount = Number.parseFloat(normalizedAmount);\n\n  if (!wallet.account || !wallet.walletClient || !wallet.publicClient) {\n    throw new Error(\n      \"Wallet client and public client are required for withdraw.\"\n    );\n  }\n\n  const signatureChainId = getSignatureChainId(environment);\n  const hyperliquidChain = HL_CHAIN_LABEL[environment];\n\n  const domain = {\n    name: \"HyperliquidSignTransaction\",\n    version: \"1\",\n    chainId: Number.parseInt(signatureChainId, 16),\n    verifyingContract: ZERO_ADDRESS,\n  } as const;\n\n  const time = BigInt(Date.now());\n  const nonce = Number(time);\n  const normalizedDestination = normalizeAddress(destination);\n\n  const message = {\n    hyperliquidChain,\n    destination: normalizedDestination,\n    amount: normalizedAmount,\n    time,\n  };\n\n  const types = {\n    \"HyperliquidTransaction:Withdraw\": [\n      { name: \"hyperliquidChain\", type: \"string\" },\n      { name: \"destination\", type: \"string\" },\n      { name: \"amount\", type: \"string\" },\n      { name: \"time\", type: \"uint64\" },\n    ],\n  } as const;\n\n  const signatureHex = await wallet.walletClient.signTypedData({\n    account: wallet.account,\n    domain,\n    types,\n    primaryType: \"HyperliquidTransaction:Withdraw\",\n    message,\n  });\n\n  const signature = splitSignature(signatureHex);\n\n  const payload = {\n    action: {\n      type: \"withdraw3\",\n      signatureChainId,\n      hyperliquidChain,\n      destination: normalizedDestination,\n      amount: normalizedAmount,\n      time: nonce,\n    },\n    nonce,\n    signature,\n  };\n\n  const endpoint = `${HL_ENDPOINT[environment]}/exchange`;\n  const response = await fetch(endpoint, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify(payload),\n  });\n\n  const json = (await response.json().catch(() => null)) as {\n    status?: string;\n    response?: unknown;\n    error?: string;\n  } | null;\n\n  if (!response.ok || json?.status !== \"ok\") {\n    throw new Error(\n      `Hyperliquid withdraw failed: ${\n        json?.response ?? json?.error ?? response.statusText\n      }`\n    );\n  }\n\n  return {\n    amount: parsedAmount,\n    destination: normalizedDestination,\n    environment,\n    nonce,\n    status: json.status ?? \"ok\",\n  };\n}\n\nexport async function fetchHyperliquidClearinghouseState(params: {\n  environment: HyperliquidEnvironment;\n  walletAddress: `0x${string}`;\n}): Promise<HyperliquidClearinghouseState> {\n  const { environment, walletAddress } = params;\n  const response = await fetch(`${HL_ENDPOINT[environment]}/info`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({ type: \"clearinghouseState\", user: walletAddress }),\n  });\n\n  const data = (await response.json().catch(() => null)) as Record<\n    string,\n    unknown\n  > | null;\n\n  return {\n    ok: response.ok,\n    data,\n  };\n}\n\n/**\n * Approve a max builder fee for a specific builder address (user-signed action).\n */\nexport async function approveHyperliquidBuilderFee(\n  options: HyperliquidApproveBuilderFeeOptions\n): Promise<HyperliquidApproveBuilderFeeResponse> {\n  const { environment, wallet, nonce, signatureChainId } = options;\n\n  if (!wallet?.account || !wallet.walletClient) {\n    throw new Error(\n      \"Hyperliquid builder approval requires a wallet with signing capabilities.\"\n    );\n  }\n\n  const maxFeeRateValue = BUILDER_CODE.fee / 1000;\n  const formattedPercent = `${maxFeeRateValue}%`;\n\n  const normalizedBuilder = normalizeAddress(BUILDER_CODE.address);\n  const inferredEnvironment = environment ?? \"mainnet\";\n  const resolvedBaseUrl = API_BASES[inferredEnvironment];\n  const maxFeeRate = formattedPercent;\n\n  const effectiveNonce = nonce ?? Date.now();\n  const signatureNonce = BigInt(effectiveNonce);\n  const signatureChainHex =\n    signatureChainId ?? getSignatureChainId(inferredEnvironment);\n\n  const approvalSignature = await signApproveBuilderFee({\n    wallet,\n    maxFeeRate,\n    nonce: signatureNonce,\n    signatureChainId: signatureChainHex,\n    isTestnet: inferredEnvironment === \"testnet\",\n  });\n\n  const action = {\n    type: \"approveBuilderFee\",\n    maxFeeRate,\n    builder: normalizedBuilder,\n    hyperliquidChain: HL_CHAIN_LABEL[inferredEnvironment],\n    signatureChainId: signatureChainHex,\n    nonce: effectiveNonce,\n  };\n\n  const payload = {\n    action,\n    nonce: effectiveNonce,\n    signature: approvalSignature,\n  };\n\n  const response = await fetch(`${resolvedBaseUrl}/exchange`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify(payload),\n  });\n\n  const rawText = await response.text().catch(() => null);\n  let parsed: HyperliquidApproveBuilderFeeResponse | { error?: string; message?: string } | string | null = null;\n  if (rawText && rawText.length) {\n    try {\n      parsed = JSON.parse(rawText) as\n        | HyperliquidApproveBuilderFeeResponse\n        | { error?: string; message?: string }\n        | null;\n    } catch {\n      parsed = rawText;\n    }\n  }\n  const json =\n    parsed && typeof parsed === \"object\" && \"status\" in parsed\n      ? (parsed as HyperliquidApproveBuilderFeeResponse)\n      : null;\n\n  if (!response.ok || !json) {\n    const detail =\n      (parsed as { error?: string; message?: string } | null)?.error ??\n      (parsed as { error?: string; message?: string } | null)?.message ??\n      (typeof parsed === \"string\" ? parsed : rawText);\n    const suffix = detail ? ` Detail: ${detail}` : \"\";\n    throw new HyperliquidApiError(\n      `Failed to submit builder approval.${suffix}`,\n      parsed ?? rawText ?? { status: response.status }\n    );\n  }\n\n  if (json.status !== \"ok\") {\n    const detail = (parsed as { error?: string } | null)?.error ?? rawText;\n    throw new HyperliquidApiError(\n      detail\n        ? `Hyperliquid builder approval returned an error: ${detail}`\n        : \"Hyperliquid builder approval returned an error.\",\n      json\n    );\n  }\n\n  return json;\n}\n\n/**\n * Query max builder fee for a user/builder pair.\n */\nexport async function getHyperliquidMaxBuilderFee(params: {\n  environment: HyperliquidEnvironment;\n  user: `0x${string}`;\n}): Promise<unknown> {\n  const { environment, user } = params;\n  const resolvedBaseUrl = API_BASES[environment];\n\n  const response = await fetch(`${resolvedBaseUrl}/info`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({\n      type: \"maxBuilderFee\",\n      user: normalizeAddress(user),\n      builder: BUILDER_CODE.address,\n    }),\n  });\n\n  const data = await response.json().catch(() => null);\n  if (!response.ok) {\n    throw new HyperliquidApiError(\n      \"Failed to query max builder fee.\",\n      data ?? { status: response.status }\n    );\n  }\n  return data;\n}\n\nexport async function recordHyperliquidTermsAcceptance(\n  input: HyperliquidTermsRecordInput\n) {\n  const { environment, walletAddress, storeOptions } = input;\n  return store(\n    {\n      source: \"hyperliquid\",\n      ref: `${environment}-terms-${Date.now()}`,\n      status: \"info\",\n      walletAddress,\n      action: \"terms\",\n      metadata: {\n        environment,\n        note: \"Hyperliquid does not expose a terms endpoint; this records local acknowledgement only.\",\n      },\n    },\n    storeOptions\n  );\n}\n\nexport async function recordHyperliquidBuilderApproval(\n  input: HyperliquidBuilderApprovalRecordInput\n) {\n  const { environment, walletAddress, storeOptions } = input;\n  const maxFeeRate = `${BUILDER_CODE.fee / 1000}%`;\n  return store(\n    {\n      source: \"hyperliquid\",\n      ref: `${environment}-builder-${Date.now()}`,\n      status: \"info\",\n      walletAddress,\n      action: \"builder-approval\",\n      metadata: {\n        environment,\n        builder: BUILDER_CODE.address,\n        maxFeeRate,\n      },\n    },\n    storeOptions\n  );\n}\n\nexport * from \"./exchange\";\nexport * from \"./info\";\nexport * from \"./env\";\nexport * from \"./symbols\";\nexport * from \"./order-utils\";\nexport * from \"./state-readers\";\nexport * from \"./market-data\";\n\nexport const __hyperliquidInternals = {\n  toApiDecimal,\n  createL1ActionHash,\n  splitSignature,\n};\n"]}